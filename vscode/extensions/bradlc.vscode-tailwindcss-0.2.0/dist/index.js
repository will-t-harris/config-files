module.exports=function(e,t){"use strict";var i={};function __webpack_require__(t){if(i[t]){return i[t].exports}var n=i[t]={i:t,l:false,exports:{}};e[t].call(n.exports,n,n.exports,__webpack_require__);n.l=true;return n.exports}function startup(){return __webpack_require__(174)}t(__webpack_require__);return startup()}({25:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(797);const r=i(924);const u=i(664);t.ImplementationRequest=u.ImplementationRequest;const o=i(657);t.TypeDefinitionRequest=o.TypeDefinitionRequest;const f=i(774);t.WorkspaceFoldersRequest=f.WorkspaceFoldersRequest;t.DidChangeWorkspaceFoldersNotification=f.DidChangeWorkspaceFoldersNotification;const l=i(940);t.ConfigurationRequest=l.ConfigurationRequest;const s=i(735);t.DocumentColorRequest=s.DocumentColorRequest;t.ColorPresentationRequest=s.ColorPresentationRequest;const c=i(383);t.FoldingRangeRequest=c.FoldingRangeRequest;const h=i(894);t.DeclarationRequest=h.DeclarationRequest;let a;var d;(function(e){function is(e){let t=e;return n.string(t.language)||n.string(t.scheme)||n.string(t.pattern)}e.is=is})(d=t.DocumentFilter||(t.DocumentFilter={}));var m;(function(e){e.type=new r.RequestType("client/registerCapability")})(m=t.RegistrationRequest||(t.RegistrationRequest={}));var y;(function(e){e.type=new r.RequestType("client/unregisterCapability")})(y=t.UnregistrationRequest||(t.UnregistrationRequest={}));var C;(function(e){e.Create="create";e.Rename="rename";e.Delete="delete"})(C=t.ResourceOperationKind||(t.ResourceOperationKind={}));var R;(function(e){e.Abort="abort";e.Transactional="transactional";e.TextOnlyTransactional="textOnlyTransactional";e.Undo="undo"})(R=t.FailureHandlingKind||(t.FailureHandlingKind={}));var D;(function(e){e.None=0;e.Full=1;e.Incremental=2})(D=t.TextDocumentSyncKind||(t.TextDocumentSyncKind={}));var w;(function(e){e.type=new r.RequestType("initialize")})(w=t.InitializeRequest||(t.InitializeRequest={}));var S;(function(e){e.unknownProtocolVersion=1})(S=t.InitializeError||(t.InitializeError={}));var b;(function(e){e.type=new r.NotificationType("initialized")})(b=t.InitializedNotification||(t.InitializedNotification={}));var p;(function(e){e.type=new r.RequestType0("shutdown")})(p=t.ShutdownRequest||(t.ShutdownRequest={}));var x;(function(e){e.type=new r.NotificationType0("exit")})(x=t.ExitNotification||(t.ExitNotification={}));var T;(function(e){e.type=new r.NotificationType("workspace/didChangeConfiguration")})(T=t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={}));var F;(function(e){e.Error=1;e.Warning=2;e.Info=3;e.Log=4})(F=t.MessageType||(t.MessageType={}));var E;(function(e){e.type=new r.NotificationType("window/showMessage")})(E=t.ShowMessageNotification||(t.ShowMessageNotification={}));var k;(function(e){e.type=new r.RequestType("window/showMessageRequest")})(k=t.ShowMessageRequest||(t.ShowMessageRequest={}));var g;(function(e){e.type=new r.NotificationType("window/logMessage")})(g=t.LogMessageNotification||(t.LogMessageNotification={}));var L;(function(e){e.type=new r.NotificationType("telemetry/event")})(L=t.TelemetryEventNotification||(t.TelemetryEventNotification={}));var O;(function(e){e.type=new r.NotificationType("textDocument/didOpen")})(O=t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={}));var A;(function(e){e.type=new r.NotificationType("textDocument/didChange")})(A=t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={}));var U;(function(e){e.type=new r.NotificationType("textDocument/didClose")})(U=t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={}));var j;(function(e){e.type=new r.NotificationType("textDocument/didSave")})(j=t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={}));var N;(function(e){e.type=new r.NotificationType("textDocument/willSave")})(N=t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={}));var W;(function(e){e.type=new r.RequestType("textDocument/willSaveWaitUntil")})(W=t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={}));var I;(function(e){e.type=new r.NotificationType("workspace/didChangeWatchedFiles")})(I=t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={}));var q;(function(e){e.Created=1;e.Changed=2;e.Deleted=3})(q=t.FileChangeType||(t.FileChangeType={}));var $;(function(e){e.Create=1;e.Change=2;e.Delete=4})($=t.WatchKind||(t.WatchKind={}));var V;(function(e){e.type=new r.NotificationType("textDocument/publishDiagnostics")})(V=t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={}));var z;(function(e){e.Invoked=1;e.TriggerCharacter=2;e.TriggerForIncompleteCompletions=3})(z=t.CompletionTriggerKind||(t.CompletionTriggerKind={}));var K;(function(e){e.type=new r.RequestType("textDocument/completion")})(K=t.CompletionRequest||(t.CompletionRequest={}));var P;(function(e){e.type=new r.RequestType("completionItem/resolve")})(P=t.CompletionResolveRequest||(t.CompletionResolveRequest={}));var H;(function(e){e.type=new r.RequestType("textDocument/hover")})(H=t.HoverRequest||(t.HoverRequest={}));var B;(function(e){e.type=new r.RequestType("textDocument/signatureHelp")})(B=t.SignatureHelpRequest||(t.SignatureHelpRequest={}));var X;(function(e){e.type=new r.RequestType("textDocument/definition")})(X=t.DefinitionRequest||(t.DefinitionRequest={}));var J;(function(e){e.type=new r.RequestType("textDocument/references")})(J=t.ReferencesRequest||(t.ReferencesRequest={}));var Q;(function(e){e.type=new r.RequestType("textDocument/documentHighlight")})(Q=t.DocumentHighlightRequest||(t.DocumentHighlightRequest={}));var G;(function(e){e.type=new r.RequestType("textDocument/documentSymbol")})(G=t.DocumentSymbolRequest||(t.DocumentSymbolRequest={}));var Z;(function(e){e.type=new r.RequestType("workspace/symbol")})(Z=t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={}));var Y;(function(e){e.type=new r.RequestType("textDocument/codeAction")})(Y=t.CodeActionRequest||(t.CodeActionRequest={}));var v;(function(e){e.type=new r.RequestType("textDocument/codeLens")})(v=t.CodeLensRequest||(t.CodeLensRequest={}));var M;(function(e){e.type=new r.RequestType("codeLens/resolve")})(M=t.CodeLensResolveRequest||(t.CodeLensResolveRequest={}));var _;(function(e){e.type=new r.RequestType("textDocument/formatting")})(_=t.DocumentFormattingRequest||(t.DocumentFormattingRequest={}));var ee;(function(e){e.type=new r.RequestType("textDocument/rangeFormatting")})(ee=t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={}));var te;(function(e){e.type=new r.RequestType("textDocument/onTypeFormatting")})(te=t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={}));var ie;(function(e){e.type=new r.RequestType("textDocument/rename")})(ie=t.RenameRequest||(t.RenameRequest={}));var ne;(function(e){e.type=new r.RequestType("textDocument/prepareRename")})(ne=t.PrepareRenameRequest||(t.PrepareRenameRequest={}));var re;(function(e){e.type=new r.RequestType("textDocument/documentLink")})(re=t.DocumentLinkRequest||(t.DocumentLinkRequest={}));var ue;(function(e){e.type=new r.RequestType("documentLink/resolve")})(ue=t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={}));var oe;(function(e){e.type=new r.RequestType("workspace/executeCommand")})(oe=t.ExecuteCommandRequest||(t.ExecuteCommandRequest={}));var fe;(function(e){e.type=new r.RequestType("workspace/applyEdit")})(fe=t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},49:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(978);const r=i(532);const u=i(573);function access(e,t){if(e===void 0){return undefined}return e[t]}class WorkspaceFoldersFeature{constructor(e){this._client=e;this._listeners=new Map}get messages(){return u.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=r.workspace.workspaceFolders;if(t===void 0){e.workspaceFolders=null}else{e.workspaceFolders=t.map(e=>this.asProtocol(e))}}fillClientCapabilities(e){e.workspace=e.workspace||{};e.workspace.workspaceFolders=true}initialize(e){let t=this._client;t.onRequest(u.WorkspaceFoldersRequest.type,e=>{let i=()=>{let e=r.workspace.workspaceFolders;if(e===void 0){return null}let t=e.map(e=>{return this.asProtocol(e)});return t};let n=t.clientOptions.middleware.workspace;return n&&n.workspaceFolders?n.workspaceFolders(e,i):i(e)});let i=access(access(access(e,"workspace"),"workspaceFolders"),"changeNotifications");let o;if(typeof i==="string"){o=i}else if(i===true){o=n.generateUuid()}if(o){this.register(this.messages,{id:o,registerOptions:undefined})}}register(e,t){let i=t.id;let n=this._client;let o=r.workspace.onDidChangeWorkspaceFolders(e=>{let t=e=>{let t={event:{added:e.added.map(e=>this.asProtocol(e)),removed:e.removed.map(e=>this.asProtocol(e))}};this._client.sendNotification(u.DidChangeWorkspaceFoldersNotification.type,t)};let i=n.clientOptions.middleware.workspace;i&&i.didChangeWorkspaceFolders?i.didChangeWorkspaceFolders(e,t):t(e)});this._listeners.set(i,o)}unregister(e){let t=this._listeners.get(e);if(t===void 0){return}this._listeners.delete(e);t.dispose()}dispose(){for(let e of this._listeners.values()){e.dispose()}this._listeners.clear()}asProtocol(e){if(e===void 0){return null}return{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}t.WorkspaceFoldersFeature=WorkspaceFoldersFeature},66:function(e){e.exports=require("fs")},114:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function boolean(e){return e===true||e===false}t.boolean=boolean;function string(e){return typeof e==="string"||e instanceof String}t.string=string;function number(e){return typeof e==="number"||e instanceof Number}t.number=number;function error(e){return e instanceof Error}t.error=error;function func(e){return typeof e==="function"}t.func=func;function array(e){return Array.isArray(e)}t.array=array;function stringArray(e){return array(e)&&e.every(e=>string(e))}t.stringArray=stringArray},121:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i;(function(e){e.None=0;e.First=1;e.Last=2})(i=t.Touch||(t.Touch={}));class LinkedMap{constructor(){this._map=new Map;this._head=undefined;this._tail=undefined;this._size=0}clear(){this._map.clear();this._head=undefined;this._tail=undefined;this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(!t){return undefined}return t.value}set(e,t,n=i.None){let r=this._map.get(e);if(r){r.value=t;if(n!==i.None){this.touch(r,n)}}else{r={key:e,value:t,next:undefined,previous:undefined};switch(n){case i.None:this.addItemLast(r);break;case i.First:this.addItemFirst(r);break;case i.Last:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r);this._size++}}delete(e){const t=this._map.get(e);if(!t){return false}this._map.delete(e);this.removeItem(t);this._size--;return true}shift(){if(!this._head&&!this._tail){return undefined}if(!this._head||!this._tail){throw new Error("Invalid list")}const e=this._head;this._map.delete(e.key);this.removeItem(e);this._size--;return e.value}forEach(e,t){let i=this._head;while(i){if(t){e.bind(t)(i.value,i.key,this)}else{e(i.value,i.key,this)}i=i.next}}forEachReverse(e,t){let i=this._tail;while(i){if(t){e.bind(t)(i.value,i.key,this)}else{e(i.value,i.key,this)}i=i.previous}}values(){let e=[];let t=this._head;while(t){e.push(t.value);t=t.next}return e}keys(){let e=[];let t=this._head;while(t){e.push(t.key);t=t.next}return e}addItemFirst(e){if(!this._head&&!this._tail){this._tail=e}else if(!this._head){throw new Error("Invalid list")}else{e.next=this._head;this._head.previous=e}this._head=e}addItemLast(e){if(!this._head&&!this._tail){this._head=e}else if(!this._tail){throw new Error("Invalid list")}else{e.previous=this._tail;this._tail.next=e}this._tail=e}removeItem(e){if(e===this._head&&e===this._tail){this._head=undefined;this._tail=undefined}else if(e===this._head){this._head=e.next}else if(e===this._tail){this._tail=e.previous}else{const t=e.next;const i=e.previous;if(!t||!i){throw new Error("Invalid list")}t.previous=i;i.next=t}}touch(e,t){if(!this._head||!this._tail){throw new Error("Invalid list")}if(t!==i.First&&t!==i.Last){return}if(t===i.First){if(e===this._head){return}const t=e.next;const i=e.previous;if(e===this._tail){i.next=undefined;this._tail=i}else{t.previous=i;i.next=t}e.previous=undefined;e.next=this._head;this._head.previous=e;this._head=e}else if(t===i.Last){if(e===this._tail){return}const t=e.next;const i=e.previous;if(e===this._head){t.previous=undefined;this._head=t}else{t.previous=i;i.next=t}e.next=undefined;e.previous=this._tail;this._tail.next=e;this._tail=e}}}t.LinkedMap=LinkedMap},136:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(978);const r=i(146);const u=i(532);const o=i(573);const f=i(592);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}class ImplementationFeature extends f.TextDocumentFeature{constructor(e){super(e,o.ImplementationRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"implementation");t.dynamicRegistration=true;t.linkSupport=true}initialize(e,t){if(!e.implementationProvider){return}if(e.implementationProvider===true){if(!t){return}this.register(this.messages,{id:n.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const i=e.implementationProvider;const u=r.string(i.id)&&i.id.length>0?i.id:n.generateUuid();const o=i.documentSelector||t;if(o){this.register(this.messages,{id:u,registerOptions:Object.assign({},{documentSelector:o})})}}}registerLanguageProvider(e){let t=this._client;let i=(e,i,n)=>{return t.sendRequest(o.ImplementationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asDefinitionResult,e=>{t.logFailedRequest(o.ImplementationRequest.type,e);return Promise.resolve(null)})};let n=t.clientOptions.middleware;return u.languages.registerImplementationProvider(e.documentSelector,{provideImplementation:(e,t,r)=>{return n.provideImplementation?n.provideImplementation(e,t,r,i):i(e,t,r)}})}}t.ImplementationFeature=ImplementationFeature},146:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function boolean(e){return e===true||e===false}t.boolean=boolean;function string(e){return typeof e==="string"||e instanceof String}t.string=string;function number(e){return typeof e==="number"||e instanceof Number}t.number=number;function error(e){return e instanceof Error}t.error=error;function func(e){return typeof e==="function"}t.func=func;function array(e){return Array.isArray(e)}t.array=array;function stringArray(e){return array(e)&&e.every(e=>string(e))}t.stringArray=stringArray;function typedArray(e,t){return Array.isArray(e)&&e.every(t)}t.typedArray=typedArray;function thenable(e){return e&&func(e.then)}t.thenable=thenable},157:function(e){function webpackEmptyContext(e){var t=new Error("Cannot find module '"+e+"'");t.code="MODULE_NOT_FOUND";throw t}webpackEmptyContext.keys=function(){return[]};webpackEmptyContext.resolve=webpackEmptyContext;e.exports=webpackEmptyContext;webpackEmptyContext.id=157},174:function(e,t,i){"use strict";i.r(t);i.d(t,"CSS_LANGUAGES",function(){return h});i.d(t,"JS_LANGUAGES",function(){return a});i.d(t,"HTML_LANGUAGES",function(){return d});i.d(t,"LANGUAGES",function(){return m});i.d(t,"activate",function(){return activate});i.d(t,"deactivate",function(){return deactivate});var n=i(532);var r=i.n(n);var u=i(907);var o=i.n(u);var f=i(589);var l=i.n(f);var s=undefined&&undefined.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,u){function fulfilled(e){try{step(n.next(e))}catch(e){u(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){u(e)}}function step(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};const c="**/{tailwind,tailwind.config,tailwind-config,.tailwindrc}.js";const h=["css","less","postcss","sass","scss","stylus","vue"];const a=["javascript","javascriptreact","reason","typescriptreact"];const d=["blade","edge","ejs","erb","haml","handlebars","html","HTML (Eex)","jade","leaf","markdown","njk","nunjucks","php","razor","slim","svelte","twig","vue",...a];const m=[...h,...d].filter((e,t,i)=>i.indexOf(e)===t);let y;let C=new Map;let R;function sortedWorkspaceFolders(){if(R===void 0){R=n["workspace"].workspaceFolders?n["workspace"].workspaceFolders.map(e=>{let t=e.uri.toString();if(t.charAt(t.length-1)!=="/"){t=t+"/"}return t}).sort((e,t)=>{return e.length-t.length}):[]}return R}n["workspace"].onDidChangeWorkspaceFolders(()=>R=undefined);function getOuterMostWorkspaceFolder(e){let t=sortedWorkspaceFolders();for(let i of t){let t=e.uri.toString();if(t.charAt(t.length-1)!=="/"){t=t+"/"}if(t.startsWith(i)){return n["workspace"].getWorkspaceFolder(n["Uri"].parse(i))}}return e}function activate(e){return s(this,void 0,void 0,function*(){let t=e.asAbsolutePath(f["join"]("dist","server","index.js"));let i=n["window"].createOutputChannel("tailwindcss-language-server");function didOpenTextDocument(e){return s(this,void 0,void 0,function*(){if(e.uri.scheme!=="file"||m.indexOf(e.languageId)===-1){return}let r=e.uri;let o=n["workspace"].getWorkspaceFolder(r);if(!o){return}o=getOuterMostWorkspaceFolder(o);if(!C.has(o.uri.toString())){C.set(o.uri.toString(),null);let e=yield n["workspace"].findFiles(c,"**/node_modules/**",1);if(!e.length)return;let r={execArgv:["--nolazy",`--inspect=${6011+C.size}`]};let f={run:{module:t,transport:u["TransportKind"].ipc},debug:{module:t,transport:u["TransportKind"].ipc,options:r}};let l={documentSelector:m.map(e=>({scheme:"file",language:e,pattern:`${o.uri.fsPath}/**/*`})),diagnosticCollectionName:"tailwindcss-language-server",workspaceFolder:o,outputChannel:i,synchronize:{fileEvents:n["workspace"].createFileSystemWatcher(c)}};let s=new u["LanguageClient"]("tailwindcss-language-server","Tailwind CSS Language Server",f,l);s.start();C.set(o.uri.toString(),s)}})}n["workspace"].onDidOpenTextDocument(didOpenTextDocument);n["workspace"].textDocuments.forEach(didOpenTextDocument);n["workspace"].onDidChangeWorkspaceFolders(e=>{for(let t of e.removed){let e=C.get(t.uri.toString());if(e){C.delete(t.uri.toString());e.stop()}}})})}function deactivate(){let e=[];if(y){e.push(y.stop())}for(let t of C.values()){if(t){e.push(t.stop())}}return Promise.all(e).then(()=>undefined)}},193:function(e){e.exports=require("net")},201:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class Delayer{constructor(e){this.defaultDelay=e;this.timeout=undefined;this.completionPromise=undefined;this.onSuccess=undefined;this.task=undefined}trigger(e,t=this.defaultDelay){this.task=e;if(t>=0){this.cancelTimeout()}if(!this.completionPromise){this.completionPromise=new Promise(e=>{this.onSuccess=e}).then(()=>{this.completionPromise=undefined;this.onSuccess=undefined;var e=this.task();this.task=undefined;return e})}if(t>=0||this.timeout===void 0){this.timeout=setTimeout(()=>{this.timeout=undefined;this.onSuccess(undefined)},t>=0?t:this.defaultDelay)}return this.completionPromise}forceDelivery(){if(!this.completionPromise){return undefined}this.cancelTimeout();let e=this.task();this.completionPromise=undefined;this.onSuccess=undefined;this.task=undefined;return e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout();this.completionPromise=undefined}cancelTimeout(){if(this.timeout!==void 0){clearTimeout(this.timeout);this.timeout=undefined}}}t.Delayer=Delayer},204:function(e){e.exports=require("child_process")},215:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(532);const r=i(573);const u=i(146);const o=i(302);const f=i(678);const l=i(645);var s;(function(e){function is(e){let t=e;return t&&u.string(t.language)&&u.string(t.value)}e.is=is})(s||(s={}));function createConverter(e){const t=e=>n.Uri.parse(e);const i=e||t;function asUri(e){return i(e)}function asDiagnostics(e){return e.map(asDiagnostic)}function asDiagnostic(e){let t=new n.Diagnostic(asRange(e.range),e.message,asDiagnosticSeverity(e.severity));if(u.number(e.code)||u.string(e.code)){t.code=e.code}if(e.source){t.source=e.source}if(e.relatedInformation){t.relatedInformation=asRelatedInformation(e.relatedInformation)}return t}function asRelatedInformation(e){return e.map(asDiagnosticRelatedInformation)}function asDiagnosticRelatedInformation(e){return new n.DiagnosticRelatedInformation(asLocation(e.location),e.message)}function asPosition(e){if(!e){return undefined}return new n.Position(e.line,e.character)}function asRange(e){if(!e){return undefined}return new n.Range(asPosition(e.start),asPosition(e.end))}function asDiagnosticSeverity(e){if(e===void 0||e===null){return n.DiagnosticSeverity.Error}switch(e){case r.DiagnosticSeverity.Error:return n.DiagnosticSeverity.Error;case r.DiagnosticSeverity.Warning:return n.DiagnosticSeverity.Warning;case r.DiagnosticSeverity.Information:return n.DiagnosticSeverity.Information;case r.DiagnosticSeverity.Hint:return n.DiagnosticSeverity.Hint}return n.DiagnosticSeverity.Error}function asHoverContent(e){if(u.string(e)){return new n.MarkdownString(e)}else if(s.is(e)){let t=new n.MarkdownString;return t.appendCodeblock(e.value,e.language)}else if(Array.isArray(e)){let t=[];for(let i of e){let e=new n.MarkdownString;if(s.is(i)){e.appendCodeblock(i.value,i.language)}else{e.appendMarkdown(i)}t.push(e)}return t}else{let t;switch(e.kind){case r.MarkupKind.Markdown:return new n.MarkdownString(e.value);case r.MarkupKind.PlainText:t=new n.MarkdownString;t.appendText(e.value);return t;default:t=new n.MarkdownString;t.appendText(`Unsupported Markup content received. Kind is: ${e.kind}`);return t}}}function asDocumentation(e){if(u.string(e)){return e}else{switch(e.kind){case r.MarkupKind.Markdown:return new n.MarkdownString(e.value);case r.MarkupKind.PlainText:return e.value;default:return`Unsupported Markup content received. Kind is: ${e.kind}`}}}function asHover(e){if(!e){return undefined}return new n.Hover(asHoverContent(e.contents),asRange(e.range))}function asCompletionResult(e){if(!e){return undefined}if(Array.isArray(e)){let t=e;return t.map(asCompletionItem)}let t=e;return new n.CompletionList(t.items.map(asCompletionItem),t.isIncomplete)}function asCompletionItemKind(e){if(r.CompletionItemKind.Text<=e&&e<=r.CompletionItemKind.TypeParameter){return[e-1,undefined]}return[n.CompletionItemKind.Text,e]}function asCompletionItem(e){let t=new o.default(e.label);if(e.detail){t.detail=e.detail}if(e.documentation){t.documentation=asDocumentation(e.documentation);t.documentationFormat=u.string(e.documentation)?"$string":e.documentation.kind}if(e.filterText){t.filterText=e.filterText}let i=asCompletionInsertText(e);if(i){t.insertText=i.text;t.range=i.range;t.fromEdit=i.fromEdit}if(u.number(e.kind)){let[i,n]=asCompletionItemKind(e.kind);t.kind=i;if(n){t.originalItemKind=n}}if(e.sortText){t.sortText=e.sortText}if(e.additionalTextEdits){t.additionalTextEdits=asTextEdits(e.additionalTextEdits)}if(u.stringArray(e.commitCharacters)){t.commitCharacters=e.commitCharacters.slice()}if(e.command){t.command=asCommand(e.command)}if(e.deprecated===true||e.deprecated===false){t.deprecated=e.deprecated}if(e.preselect===true||e.preselect===false){t.preselect=e.preselect}if(e.data!==void 0){t.data=e.data}return t}function asCompletionInsertText(e){if(e.textEdit){if(e.insertTextFormat===r.InsertTextFormat.Snippet){return{text:new n.SnippetString(e.textEdit.newText),range:asRange(e.textEdit.range),fromEdit:true}}else{return{text:e.textEdit.newText,range:asRange(e.textEdit.range),fromEdit:true}}}else if(e.insertText){if(e.insertTextFormat===r.InsertTextFormat.Snippet){return{text:new n.SnippetString(e.insertText),fromEdit:false}}else{return{text:e.insertText,fromEdit:false}}}else{return undefined}}function asTextEdit(e){if(!e){return undefined}return new n.TextEdit(asRange(e.range),e.newText)}function asTextEdits(e){if(!e){return undefined}return e.map(asTextEdit)}function asSignatureHelp(e){if(!e){return undefined}let t=new n.SignatureHelp;if(u.number(e.activeSignature)){t.activeSignature=e.activeSignature}else{t.activeSignature=0}if(u.number(e.activeParameter)){t.activeParameter=e.activeParameter}else{t.activeParameter=0}if(e.signatures){t.signatures=asSignatureInformations(e.signatures)}return t}function asSignatureInformations(e){return e.map(asSignatureInformation)}function asSignatureInformation(e){let t=new n.SignatureInformation(e.label);if(e.documentation){t.documentation=asDocumentation(e.documentation)}if(e.parameters){t.parameters=asParameterInformations(e.parameters)}return t}function asParameterInformations(e){return e.map(asParameterInformation)}function asParameterInformation(e){let t=new n.ParameterInformation(e.label);if(e.documentation){t.documentation=asDocumentation(e.documentation)}return t}function asLocation(e){if(!e){return undefined}return new n.Location(i(e.uri),asRange(e.range))}function asDeclarationResult(e){if(!e){return undefined}return asLocationResult(e)}function asDefinitionResult(e){if(!e){return undefined}return asLocationResult(e)}function asLocationLink(e){if(!e){return undefined}return{targetUri:i(e.targetUri),targetRange:asRange(e.targetSelectionRange),originSelectionRange:asRange(e.originSelectionRange),targetSelectionRange:asRange(e.targetSelectionRange)}}function asLocationResult(e){if(!e){return undefined}if(u.array(e)){if(e.length===0){return[]}else if(r.LocationLink.is(e[0])){let t=e;return t.map(e=>asLocationLink(e))}else{let t=e;return t.map(e=>asLocation(e))}}else if(r.LocationLink.is(e)){return[asLocationLink(e)]}else{return asLocation(e)}}function asReferences(e){if(!e){return undefined}return e.map(e=>asLocation(e))}function asDocumentHighlights(e){if(!e){return undefined}return e.map(asDocumentHighlight)}function asDocumentHighlight(e){let t=new n.DocumentHighlight(asRange(e.range));if(u.number(e.kind)){t.kind=asDocumentHighlightKind(e.kind)}return t}function asDocumentHighlightKind(e){switch(e){case r.DocumentHighlightKind.Text:return n.DocumentHighlightKind.Text;case r.DocumentHighlightKind.Read:return n.DocumentHighlightKind.Read;case r.DocumentHighlightKind.Write:return n.DocumentHighlightKind.Write}return n.DocumentHighlightKind.Text}function asSymbolInformations(e,t){if(!e){return undefined}return e.map(e=>asSymbolInformation(e,t))}function asSymbolKind(e){if(e<=r.SymbolKind.TypeParameter){return e-1}return n.SymbolKind.Property}function asSymbolInformation(e,t){let r=new n.SymbolInformation(e.name,asSymbolKind(e.kind),asRange(e.location.range),e.location.uri?i(e.location.uri):t);if(e.containerName){r.containerName=e.containerName}return r}function asDocumentSymbols(e){if(e===void 0||e===null){return undefined}return e.map(asDocumentSymbol)}function asDocumentSymbol(e){let t=new n.DocumentSymbol(e.name,e.detail||"",asSymbolKind(e.kind),asRange(e.range),asRange(e.selectionRange));if(e.children!==void 0&&e.children.length>0){let i=[];for(let t of e.children){i.push(asDocumentSymbol(t))}t.children=i}return t}function asCommand(e){let t={title:e.title,command:e.command};if(e.arguments){t.arguments=e.arguments}return t}function asCommands(e){if(!e){return undefined}return e.map(asCommand)}const c=new Map;c.set("",n.CodeActionKind.Empty);c.set(r.CodeActionKind.QuickFix,n.CodeActionKind.QuickFix);c.set(r.CodeActionKind.Refactor,n.CodeActionKind.Refactor);c.set(r.CodeActionKind.RefactorExtract,n.CodeActionKind.RefactorExtract);c.set(r.CodeActionKind.RefactorInline,n.CodeActionKind.RefactorInline);c.set(r.CodeActionKind.RefactorRewrite,n.CodeActionKind.RefactorRewrite);c.set(r.CodeActionKind.Source,n.CodeActionKind.Source);c.set(r.CodeActionKind.SourceOrganizeImports,n.CodeActionKind.SourceOrganizeImports);function asCodeActionKind(e){if(e===void 0||e===null){return undefined}let t=c.get(e);if(t){return t}let i=e.split(".");t=n.CodeActionKind.Empty;for(let e of i){t=t.append(e)}return t}function asCodeActionKinds(e){if(e===void 0||e===null){return undefined}return e.map(e=>asCodeActionKind(e))}function asCodeAction(e){if(e===void 0||e===null){return undefined}let t=new n.CodeAction(e.title);if(e.kind!==void 0){t.kind=asCodeActionKind(e.kind)}if(e.diagnostics){t.diagnostics=asDiagnostics(e.diagnostics)}if(e.edit){t.edit=asWorkspaceEdit(e.edit)}if(e.command){t.command=asCommand(e.command)}return t}function asCodeLens(e){if(!e){return undefined}let t=new f.default(asRange(e.range));if(e.command){t.command=asCommand(e.command)}if(e.data!==void 0&&e.data!==null){t.data=e.data}return t}function asCodeLenses(e){if(!e){return undefined}return e.map(e=>asCodeLens(e))}function asWorkspaceEdit(e){if(!e){return undefined}let t=new n.WorkspaceEdit;if(e.documentChanges){e.documentChanges.forEach(e=>{if(r.CreateFile.is(e)){t.createFile(i(e.uri),e.options)}else if(r.RenameFile.is(e)){t.renameFile(i(e.oldUri),i(e.newUri),e.options)}else if(r.DeleteFile.is(e)){t.deleteFile(i(e.uri),e.options)}else if(r.TextDocumentEdit.is(e)){t.set(i(e.textDocument.uri),asTextEdits(e.edits))}else{console.error(`Unknown workspace edit change received:\n${JSON.stringify(e,undefined,4)}`)}})}else if(e.changes){Object.keys(e.changes).forEach(n=>{t.set(i(n),asTextEdits(e.changes[n]))})}return t}function asDocumentLink(e){let t=asRange(e.range);let i=e.target?asUri(e.target):undefined;let n=new l.default(t,i);if(e.data!==void 0&&e.data!==null){n.data=e.data}return n}function asDocumentLinks(e){if(!e){return undefined}return e.map(asDocumentLink)}function asColor(e){return new n.Color(e.red,e.green,e.blue,e.alpha)}function asColorInformation(e){return new n.ColorInformation(asRange(e.range),asColor(e.color))}function asColorInformations(e){if(Array.isArray(e)){return e.map(asColorInformation)}return undefined}function asColorPresentation(e){let t=new n.ColorPresentation(e.label);t.additionalTextEdits=asTextEdits(e.additionalTextEdits);if(e.textEdit){t.textEdit=asTextEdit(e.textEdit)}return t}function asColorPresentations(e){if(Array.isArray(e)){return e.map(asColorPresentation)}return undefined}function asFoldingRangeKind(e){if(e){switch(e){case r.FoldingRangeKind.Comment:return n.FoldingRangeKind.Comment;case r.FoldingRangeKind.Imports:return n.FoldingRangeKind.Imports;case r.FoldingRangeKind.Region:return n.FoldingRangeKind.Region}}return void 0}function asFoldingRange(e){return new n.FoldingRange(e.startLine,e.endLine,asFoldingRangeKind(e.kind))}function asFoldingRanges(e){if(Array.isArray(e)){return e.map(asFoldingRange)}return void 0}return{asUri:asUri,asDiagnostics:asDiagnostics,asDiagnostic:asDiagnostic,asRange:asRange,asPosition:asPosition,asDiagnosticSeverity:asDiagnosticSeverity,asHover:asHover,asCompletionResult:asCompletionResult,asCompletionItem:asCompletionItem,asTextEdit:asTextEdit,asTextEdits:asTextEdits,asSignatureHelp:asSignatureHelp,asSignatureInformations:asSignatureInformations,asSignatureInformation:asSignatureInformation,asParameterInformations:asParameterInformations,asParameterInformation:asParameterInformation,asDeclarationResult:asDeclarationResult,asDefinitionResult:asDefinitionResult,asLocation:asLocation,asReferences:asReferences,asDocumentHighlights:asDocumentHighlights,asDocumentHighlight:asDocumentHighlight,asDocumentHighlightKind:asDocumentHighlightKind,asSymbolInformations:asSymbolInformations,asSymbolInformation:asSymbolInformation,asDocumentSymbols:asDocumentSymbols,asDocumentSymbol:asDocumentSymbol,asCommand:asCommand,asCommands:asCommands,asCodeAction:asCodeAction,asCodeActionKind:asCodeActionKind,asCodeActionKinds:asCodeActionKinds,asCodeLens:asCodeLens,asCodeLenses:asCodeLenses,asWorkspaceEdit:asWorkspaceEdit,asDocumentLink:asDocumentLink,asDocumentLinks:asDocumentLinks,asFoldingRangeKind:asFoldingRangeKind,asFoldingRange:asFoldingRange,asFoldingRanges:asFoldingRanges,asColor:asColor,asColorInformation:asColorInformation,asColorInformations:asColorInformations,asColorPresentation:asColorPresentation,asColorPresentations:asColorPresentations}}t.createConverter=createConverter},258:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(760);const r=i(114);var u;(function(e){e.None=Object.freeze({isCancellationRequested:false,onCancellationRequested:n.Event.None});e.Cancelled=Object.freeze({isCancellationRequested:true,onCancellationRequested:n.Event.None});function is(t){let i=t;return i&&(i===e.None||i===e.Cancelled||r.boolean(i.isCancellationRequested)&&!!i.onCancellationRequested)}e.is=is})(u=t.CancellationToken||(t.CancellationToken={}));const o=Object.freeze(function(e,t){let i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}});class MutableToken{constructor(){this._isCancelled=false}cancel(){if(!this._isCancelled){this._isCancelled=true;if(this._emitter){this._emitter.fire(undefined);this._emitter=undefined}}}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){if(this._isCancelled){return o}if(!this._emitter){this._emitter=new n.Emitter}return this._emitter.event}}class CancellationTokenSource{get token(){if(!this._token){this._token=new MutableToken}return this._token}cancel(){if(!this._token){this._token=u.Cancelled}else{this._token.cancel()}}dispose(){this.cancel()}}t.CancellationTokenSource=CancellationTokenSource},273:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(114);var r;(function(e){e.ParseError=-32700;e.InvalidRequest=-32600;e.MethodNotFound=-32601;e.InvalidParams=-32602;e.InternalError=-32603;e.serverErrorStart=-32099;e.serverErrorEnd=-32e3;e.ServerNotInitialized=-32002;e.UnknownErrorCode=-32001;e.RequestCancelled=-32800;e.MessageWriteError=1;e.MessageReadError=2})(r=t.ErrorCodes||(t.ErrorCodes={}));class ResponseError extends Error{constructor(e,t,i){super(t);this.code=n.number(e)?e:r.UnknownErrorCode;this.data=i;Object.setPrototypeOf(this,ResponseError.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=ResponseError;class AbstractMessageType{constructor(e,t){this._method=e;this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=AbstractMessageType;class RequestType0 extends AbstractMessageType{constructor(e){super(e,0);this._=undefined}}t.RequestType0=RequestType0;class RequestType extends AbstractMessageType{constructor(e){super(e,1);this._=undefined}}t.RequestType=RequestType;class RequestType1 extends AbstractMessageType{constructor(e){super(e,1);this._=undefined}}t.RequestType1=RequestType1;class RequestType2 extends AbstractMessageType{constructor(e){super(e,2);this._=undefined}}t.RequestType2=RequestType2;class RequestType3 extends AbstractMessageType{constructor(e){super(e,3);this._=undefined}}t.RequestType3=RequestType3;class RequestType4 extends AbstractMessageType{constructor(e){super(e,4);this._=undefined}}t.RequestType4=RequestType4;class RequestType5 extends AbstractMessageType{constructor(e){super(e,5);this._=undefined}}t.RequestType5=RequestType5;class RequestType6 extends AbstractMessageType{constructor(e){super(e,6);this._=undefined}}t.RequestType6=RequestType6;class RequestType7 extends AbstractMessageType{constructor(e){super(e,7);this._=undefined}}t.RequestType7=RequestType7;class RequestType8 extends AbstractMessageType{constructor(e){super(e,8);this._=undefined}}t.RequestType8=RequestType8;class RequestType9 extends AbstractMessageType{constructor(e){super(e,9);this._=undefined}}t.RequestType9=RequestType9;class NotificationType extends AbstractMessageType{constructor(e){super(e,1);this._=undefined}}t.NotificationType=NotificationType;class NotificationType0 extends AbstractMessageType{constructor(e){super(e,0);this._=undefined}}t.NotificationType0=NotificationType0;class NotificationType1 extends AbstractMessageType{constructor(e){super(e,1);this._=undefined}}t.NotificationType1=NotificationType1;class NotificationType2 extends AbstractMessageType{constructor(e){super(e,2);this._=undefined}}t.NotificationType2=NotificationType2;class NotificationType3 extends AbstractMessageType{constructor(e){super(e,3);this._=undefined}}t.NotificationType3=NotificationType3;class NotificationType4 extends AbstractMessageType{constructor(e){super(e,4);this._=undefined}}t.NotificationType4=NotificationType4;class NotificationType5 extends AbstractMessageType{constructor(e){super(e,5);this._=undefined}}t.NotificationType5=NotificationType5;class NotificationType6 extends AbstractMessageType{constructor(e){super(e,6);this._=undefined}}t.NotificationType6=NotificationType6;class NotificationType7 extends AbstractMessageType{constructor(e){super(e,7);this._=undefined}}t.NotificationType7=NotificationType7;class NotificationType8 extends AbstractMessageType{constructor(e){super(e,8);this._=undefined}}t.NotificationType8=NotificationType8;class NotificationType9 extends AbstractMessageType{constructor(e){super(e,9);this._=undefined}}t.NotificationType9=NotificationType9;function isRequestMessage(e){let t=e;return t&&n.string(t.method)&&(n.string(t.id)||n.number(t.id))}t.isRequestMessage=isRequestMessage;function isNotificationMessage(e){let t=e;return t&&n.string(t.method)&&e.id===void 0}t.isNotificationMessage=isNotificationMessage;function isResponseMessage(e){let t=e;return t&&(t.result!==void 0||!!t.error)&&(n.string(t.id)||n.number(t.id)||t.id===null)}t.isResponseMessage=isResponseMessage},276:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(978);const r=i(146);const u=i(532);const o=i(573);const f=i(592);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}class ColorProviderFeature extends f.TextDocumentFeature{constructor(e){super(e,o.DocumentColorRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"colorProvider").dynamicRegistration=true}initialize(e,t){if(!e.colorProvider){return}const i=e.colorProvider;const u=r.string(i.id)&&i.id.length>0?i.id:n.generateUuid();const o=i.documentSelector||t;if(o){this.register(this.messages,{id:u,registerOptions:Object.assign({},{documentSelector:o})})}}registerLanguageProvider(e){let t=this._client;let i=(e,i,n)=>{const r={color:e,textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(i.document),range:t.code2ProtocolConverter.asRange(i.range)};return t.sendRequest(o.ColorPresentationRequest.type,r,n).then(this.asColorPresentations.bind(this),e=>{t.logFailedRequest(o.ColorPresentationRequest.type,e);return Promise.resolve(null)})};let n=(e,i)=>{const n={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(o.DocumentColorRequest.type,n,i).then(this.asColorInformations.bind(this),e=>{t.logFailedRequest(o.ColorPresentationRequest.type,e);return Promise.resolve(null)})};let r=t.clientOptions.middleware;return u.languages.registerColorProvider(e.documentSelector,{provideColorPresentations:(e,t,n)=>{return r.provideColorPresentations?r.provideColorPresentations(e,t,n,i):i(e,t,n)},provideDocumentColors:(e,t)=>{return r.provideDocumentColors?r.provideDocumentColors(e,t,n):n(e,t)}})}asColor(e){return new u.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){if(Array.isArray(e)){return e.map(e=>{return new u.ColorInformation(this._client.protocol2CodeConverter.asRange(e.range),this.asColor(e.color))})}return[]}asColorPresentations(e){if(Array.isArray(e)){return e.map(e=>{let t=new u.ColorPresentation(e.label);t.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(e.additionalTextEdits);t.textEdit=this._client.protocol2CodeConverter.asTextEdit(e.textEdit);return t})}return[]}}t.ColorProviderFeature=ColorProviderFeature},298:function(e){e.exports=require("crypto")},302:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(532);class ProtocolCompletionItem extends n.CompletionItem{constructor(e){super(e)}}t.default=ProtocolCompletionItem},308:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(760);const r=i(114);let u="Content-Length: ";let o="\r\n";var f;(function(e){function is(e){let t=e;return t&&r.func(t.dispose)&&r.func(t.onClose)&&r.func(t.onError)&&r.func(t.write)}e.is=is})(f=t.MessageWriter||(t.MessageWriter={}));class AbstractMessageWriter{constructor(){this.errorEmitter=new n.Emitter;this.closeEmitter=new n.Emitter}dispose(){this.errorEmitter.dispose();this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,i){this.errorEmitter.fire([this.asError(e),t,i])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(undefined)}asError(e){if(e instanceof Error){return e}else{return new Error(`Writer recevied error. Reason: ${r.string(e.message)?e.message:"unknown"}`)}}}t.AbstractMessageWriter=AbstractMessageWriter;class StreamMessageWriter extends AbstractMessageWriter{constructor(e,t="utf8"){super();this.writable=e;this.encoding=t;this.errorCount=0;this.writable.on("error",e=>this.fireError(e));this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e);let i=Buffer.byteLength(t,this.encoding);let n=[u,i.toString(),o,o];try{this.writable.write(n.join(""),"ascii");this.writable.write(t,this.encoding);this.errorCount=0}catch(t){this.errorCount++;this.fireError(t,e,this.errorCount)}}}t.StreamMessageWriter=StreamMessageWriter;class IPCMessageWriter extends AbstractMessageWriter{constructor(e){super();this.process=e;this.errorCount=0;this.queue=[];this.sending=false;let t=this.process;t.on("error",e=>this.fireError(e));t.on("close",()=>this.fireClose)}write(e){if(!this.sending&&this.queue.length===0){this.doWriteMessage(e)}else{this.queue.push(e)}}doWriteMessage(e){try{if(this.process.send){this.sending=true;this.process.send(e,undefined,undefined,t=>{this.sending=false;if(t){this.errorCount++;this.fireError(t,e,this.errorCount)}else{this.errorCount=0}if(this.queue.length>0){this.doWriteMessage(this.queue.shift())}})}}catch(t){this.errorCount++;this.fireError(t,e,this.errorCount)}}}t.IPCMessageWriter=IPCMessageWriter;class SocketMessageWriter extends AbstractMessageWriter{constructor(e,t="utf8"){super();this.socket=e;this.queue=[];this.sending=false;this.encoding=t;this.errorCount=0;this.socket.on("error",e=>this.fireError(e));this.socket.on("close",()=>this.fireClose())}write(e){if(!this.sending&&this.queue.length===0){this.doWriteMessage(e)}else{this.queue.push(e)}}doWriteMessage(e){let t=JSON.stringify(e);let i=Buffer.byteLength(t,this.encoding);let n=[u,i.toString(),o,o];try{this.sending=true;this.socket.write(n.join(""),"ascii",i=>{if(i){this.handleError(i,e)}try{this.socket.write(t,this.encoding,t=>{this.sending=false;if(t){this.handleError(t,e)}else{this.errorCount=0}if(this.queue.length>0){this.doWriteMessage(this.queue.shift())}})}catch(i){this.handleError(i,e)}})}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++;this.fireError(e,t,this.errorCount)}}t.SocketMessageWriter=SocketMessageWriter},383:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(924);var r;(function(e){e["Comment"]="comment";e["Imports"]="imports";e["Region"]="region"})(r=t.FoldingRangeKind||(t.FoldingRangeKind={}));var u;(function(e){e.type=new n.RequestType("textDocument/foldingRange")})(u=t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},389:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(204);const r=i(589);const u=process.platform==="win32";const o=process.platform==="darwin";const f=process.platform==="linux";function terminate(e,t){if(u){try{let i={stdio:["pipe","pipe","ignore"]};if(t){i.cwd=t}n.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],i);return true}catch(e){return false}}else if(f||o){try{var i=__dirname+"/terminateProcess.sh";var r=n.spawnSync(i,[e.pid.toString()]);return r.error?false:true}catch(e){return false}}else{e.kill("SIGKILL");return true}}t.terminate=terminate},430:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(978);const r=i(146);const u=i(532);const o=i(573);const f=i(592);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}class TypeDefinitionFeature extends f.TextDocumentFeature{constructor(e){super(e,o.TypeDefinitionRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"typeDefinition").dynamicRegistration=true;let t=ensure(ensure(e,"textDocument"),"typeDefinition");t.dynamicRegistration=true;t.linkSupport=true}initialize(e,t){if(!e.typeDefinitionProvider){return}if(e.typeDefinitionProvider===true){if(!t){return}this.register(this.messages,{id:n.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const i=e.typeDefinitionProvider;const u=r.string(i.id)&&i.id.length>0?i.id:n.generateUuid();const o=i.documentSelector||t;if(o){this.register(this.messages,{id:u,registerOptions:Object.assign({},{documentSelector:o})})}}}registerLanguageProvider(e){let t=this._client;let i=(e,i,n)=>{return t.sendRequest(o.TypeDefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asDefinitionResult,e=>{t.logFailedRequest(o.TypeDefinitionRequest.type,e);return Promise.resolve(null)})};let n=t.clientOptions.middleware;return u.languages.registerTypeDefinitionProvider(e.documentSelector,{provideTypeDefinition:(e,t,r)=>{return n.provideTypeDefinition?n.provideTypeDefinition(e,t,r,i):i(e,t,r)}})}}t.TypeDefinitionFeature=TypeDefinitionFeature},431:function(e){e.exports=require("os")},483:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(978);const r=i(146);const u=i(532);const o=i(573);const f=i(592);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}class FoldingRangeFeature extends f.TextDocumentFeature{constructor(e){super(e,o.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"foldingRange");t.dynamicRegistration=true;t.rangeLimit=5e3;t.lineFoldingOnly=true}initialize(e,t){if(!e.foldingRangeProvider){return}const i=e.foldingRangeProvider;const u=r.string(i.id)&&i.id.length>0?i.id:n.generateUuid();const o=i.documentSelector||t;if(o){this.register(this.messages,{id:u,registerOptions:Object.assign({},{documentSelector:o})})}}registerLanguageProvider(e){let t=this._client;let i=(e,i,n)=>{const r={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(o.FoldingRangeRequest.type,r,n).then(this.asFoldingRanges.bind(this),e=>{t.logFailedRequest(o.FoldingRangeRequest.type,e);return Promise.resolve(null)})};let n=t.clientOptions.middleware;return u.languages.registerFoldingRangeProvider(e.documentSelector,{provideFoldingRanges(e,t,r){return n.provideFoldingRanges?n.provideFoldingRanges(e,t,r,i):i(e,t,r)}})}asFoldingRangeKind(e){if(e){switch(e){case o.FoldingRangeKind.Comment:return u.FoldingRangeKind.Comment;case o.FoldingRangeKind.Imports:return u.FoldingRangeKind.Imports;case o.FoldingRangeKind.Region:return u.FoldingRangeKind.Region}}return void 0}asFoldingRanges(e){if(Array.isArray(e)){return e.map(e=>{return new u.FoldingRange(e.startLine,e.endLine,this.asFoldingRangeKind(e.kind))})}return[]}}t.FoldingRangeFeature=FoldingRangeFeature},521:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(589);const r=i(431);const u=i(298);const o=i(193);const f=i(932);const l=i(308);function generateRandomPipeName(){const e=u.randomBytes(21).toString("hex");if(process.platform==="win32"){return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`}else{return n.join(r.tmpdir(),`vscode-${e}.sock`)}}t.generateRandomPipeName=generateRandomPipeName;function createClientPipeTransport(e,t="utf-8"){let i;let n=new Promise((e,t)=>{i=e});return new Promise((r,u)=>{let s=o.createServer(e=>{s.close();i([new f.SocketMessageReader(e,t),new l.SocketMessageWriter(e,t)])});s.on("error",u);s.listen(e,()=>{s.removeListener("error",u);r({onConnected:()=>{return n}})})})}t.createClientPipeTransport=createClientPipeTransport;function createServerPipeTransport(e,t="utf-8"){const i=o.createConnection(e);return[new f.SocketMessageReader(i,t),new l.SocketMessageWriter(i,t)]}t.createServerPipeTransport=createServerPipeTransport},532:function(e){e.exports=require("vscode")},537:function(e,t,i){(function(n){if(true&&typeof e.exports==="object"){var r=n(i(157),t);if(r!==undefined)e.exports=r}else if(typeof define==="function"&&define.amd){define(["require","exports"],n)}})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i;(function(e){function create(e,t){return{line:e,character:t}}e.create=create;function is(e){var t=e;return Y.objectLiteral(t)&&Y.number(t.line)&&Y.number(t.character)}e.is=is})(i=t.Position||(t.Position={}));var n;(function(e){function create(e,t,n,r){if(Y.number(e)&&Y.number(t)&&Y.number(n)&&Y.number(r)){return{start:i.create(e,t),end:i.create(n,r)}}else if(i.is(e)&&i.is(t)){return{start:e,end:t}}else{throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+r+"]")}}e.create=create;function is(e){var t=e;return Y.objectLiteral(t)&&i.is(t.start)&&i.is(t.end)}e.is=is})(n=t.Range||(t.Range={}));var r;(function(e){function create(e,t){return{uri:e,range:t}}e.create=create;function is(e){var t=e;return Y.defined(t)&&n.is(t.range)&&(Y.string(t.uri)||Y.undefined(t.uri))}e.is=is})(r=t.Location||(t.Location={}));var u;(function(e){function create(e,t,i,n){return{targetUri:e,targetRange:t,targetSelectionRange:i,originSelectionRange:n}}e.create=create;function is(e){var t=e;return Y.defined(t)&&n.is(t.targetRange)&&Y.string(t.targetUri)&&(n.is(t.targetSelectionRange)||Y.undefined(t.targetSelectionRange))&&(n.is(t.originSelectionRange)||Y.undefined(t.originSelectionRange))}e.is=is})(u=t.LocationLink||(t.LocationLink={}));var o;(function(e){function create(e,t,i,n){return{red:e,green:t,blue:i,alpha:n}}e.create=create;function is(e){var t=e;return Y.number(t.red)&&Y.number(t.green)&&Y.number(t.blue)&&Y.number(t.alpha)}e.is=is})(o=t.Color||(t.Color={}));var f;(function(e){function create(e,t){return{range:e,color:t}}e.create=create;function is(e){var t=e;return n.is(t.range)&&o.is(t.color)}e.is=is})(f=t.ColorInformation||(t.ColorInformation={}));var l;(function(e){function create(e,t,i){return{label:e,textEdit:t,additionalTextEdits:i}}e.create=create;function is(e){var t=e;return Y.string(t.label)&&(Y.undefined(t.textEdit)||y.is(t))&&(Y.undefined(t.additionalTextEdits)||Y.typedArray(t.additionalTextEdits,y.is))}e.is=is})(l=t.ColorPresentation||(t.ColorPresentation={}));var s;(function(e){e["Comment"]="comment";e["Imports"]="imports";e["Region"]="region"})(s=t.FoldingRangeKind||(t.FoldingRangeKind={}));var c;(function(e){function create(e,t,i,n,r){var u={startLine:e,endLine:t};if(Y.defined(i)){u.startCharacter=i}if(Y.defined(n)){u.endCharacter=n}if(Y.defined(r)){u.kind=r}return u}e.create=create;function is(e){var t=e;return Y.number(t.startLine)&&Y.number(t.startLine)&&(Y.undefined(t.startCharacter)||Y.number(t.startCharacter))&&(Y.undefined(t.endCharacter)||Y.number(t.endCharacter))&&(Y.undefined(t.kind)||Y.string(t.kind))}e.is=is})(c=t.FoldingRange||(t.FoldingRange={}));var h;(function(e){function create(e,t){return{location:e,message:t}}e.create=create;function is(e){var t=e;return Y.defined(t)&&r.is(t.location)&&Y.string(t.message)}e.is=is})(h=t.DiagnosticRelatedInformation||(t.DiagnosticRelatedInformation={}));var a;(function(e){e.Error=1;e.Warning=2;e.Information=3;e.Hint=4})(a=t.DiagnosticSeverity||(t.DiagnosticSeverity={}));var d;(function(e){function create(e,t,i,n,r,u){var o={range:e,message:t};if(Y.defined(i)){o.severity=i}if(Y.defined(n)){o.code=n}if(Y.defined(r)){o.source=r}if(Y.defined(u)){o.relatedInformation=u}return o}e.create=create;function is(e){var t=e;return Y.defined(t)&&n.is(t.range)&&Y.string(t.message)&&(Y.number(t.severity)||Y.undefined(t.severity))&&(Y.number(t.code)||Y.string(t.code)||Y.undefined(t.code))&&(Y.string(t.source)||Y.undefined(t.source))&&(Y.undefined(t.relatedInformation)||Y.typedArray(t.relatedInformation,h.is))}e.is=is})(d=t.Diagnostic||(t.Diagnostic={}));var m;(function(e){function create(e,t){var i=[];for(var n=2;n<arguments.length;n++){i[n-2]=arguments[n]}var r={title:e,command:t};if(Y.defined(i)&&i.length>0){r.arguments=i}return r}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.string(t.title)&&Y.string(t.command)}e.is=is})(m=t.Command||(t.Command={}));var y;(function(e){function replace(e,t){return{range:e,newText:t}}e.replace=replace;function insert(e,t){return{range:{start:e,end:e},newText:t}}e.insert=insert;function del(e){return{range:e,newText:""}}e.del=del;function is(e){var t=e;return Y.objectLiteral(t)&&Y.string(t.newText)&&n.is(t.range)}e.is=is})(y=t.TextEdit||(t.TextEdit={}));var C;(function(e){function create(e,t){return{textDocument:e,edits:t}}e.create=create;function is(e){var t=e;return Y.defined(t)&&T.is(t.textDocument)&&Array.isArray(t.edits)}e.is=is})(C=t.TextDocumentEdit||(t.TextDocumentEdit={}));var R;(function(e){function create(e,t){var i={kind:"create",uri:e};if(t!==void 0&&(t.overwrite!==void 0||t.ignoreIfExists!==void 0)){i.options=t}return i}e.create=create;function is(e){var t=e;return t&&t.kind==="create"&&Y.string(t.uri)&&(t.options===void 0||(t.options.overwrite===void 0||Y.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||Y.boolean(t.options.ignoreIfExists)))}e.is=is})(R=t.CreateFile||(t.CreateFile={}));var D;(function(e){function create(e,t,i){var n={kind:"rename",oldUri:e,newUri:t};if(i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)){n.options=i}return n}e.create=create;function is(e){var t=e;return t&&t.kind==="rename"&&Y.string(t.oldUri)&&Y.string(t.newUri)&&(t.options===void 0||(t.options.overwrite===void 0||Y.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||Y.boolean(t.options.ignoreIfExists)))}e.is=is})(D=t.RenameFile||(t.RenameFile={}));var w;(function(e){function create(e,t){var i={kind:"delete",uri:e};if(t!==void 0&&(t.recursive!==void 0||t.ignoreIfNotExists!==void 0)){i.options=t}return i}e.create=create;function is(e){var t=e;return t&&t.kind==="delete"&&Y.string(t.uri)&&(t.options===void 0||(t.options.recursive===void 0||Y.boolean(t.options.recursive))&&(t.options.ignoreIfNotExists===void 0||Y.boolean(t.options.ignoreIfNotExists)))}e.is=is})(w=t.DeleteFile||(t.DeleteFile={}));var S;(function(e){function is(e){var t=e;return t&&(t.changes!==void 0||t.documentChanges!==void 0)&&(t.documentChanges===void 0||t.documentChanges.every(function(e){if(Y.string(e.kind)){return R.is(e)||D.is(e)||w.is(e)}else{return C.is(e)}}))}e.is=is})(S=t.WorkspaceEdit||(t.WorkspaceEdit={}));var b=function(){function TextEditChangeImpl(e){this.edits=e}TextEditChangeImpl.prototype.insert=function(e,t){this.edits.push(y.insert(e,t))};TextEditChangeImpl.prototype.replace=function(e,t){this.edits.push(y.replace(e,t))};TextEditChangeImpl.prototype.delete=function(e){this.edits.push(y.del(e))};TextEditChangeImpl.prototype.add=function(e){this.edits.push(e)};TextEditChangeImpl.prototype.all=function(){return this.edits};TextEditChangeImpl.prototype.clear=function(){this.edits.splice(0,this.edits.length)};return TextEditChangeImpl}();var p=function(){function WorkspaceChange(e){var t=this;this._textEditChanges=Object.create(null);if(e){this._workspaceEdit=e;if(e.documentChanges){e.documentChanges.forEach(function(e){if(C.is(e)){var i=new b(e.edits);t._textEditChanges[e.textDocument.uri]=i}})}else if(e.changes){Object.keys(e.changes).forEach(function(i){var n=new b(e.changes[i]);t._textEditChanges[i]=n})}}}Object.defineProperty(WorkspaceChange.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:true,configurable:true});WorkspaceChange.prototype.getTextEditChange=function(e){if(T.is(e)){if(!this._workspaceEdit){this._workspaceEdit={documentChanges:[]}}if(!this._workspaceEdit.documentChanges){throw new Error("Workspace edit is not configured for document changes.")}var t=e;var i=this._textEditChanges[t.uri];if(!i){var n=[];var r={textDocument:t,edits:n};this._workspaceEdit.documentChanges.push(r);i=new b(n);this._textEditChanges[t.uri]=i}return i}else{if(!this._workspaceEdit){this._workspaceEdit={changes:Object.create(null)}}if(!this._workspaceEdit.changes){throw new Error("Workspace edit is not configured for normal text edit changes.")}var i=this._textEditChanges[e];if(!i){var n=[];this._workspaceEdit.changes[e]=n;i=new b(n);this._textEditChanges[e]=i}return i}};WorkspaceChange.prototype.createFile=function(e,t){this.checkDocumentChanges();this._workspaceEdit.documentChanges.push(R.create(e,t))};WorkspaceChange.prototype.renameFile=function(e,t,i){this.checkDocumentChanges();this._workspaceEdit.documentChanges.push(D.create(e,t,i))};WorkspaceChange.prototype.deleteFile=function(e,t){this.checkDocumentChanges();this._workspaceEdit.documentChanges.push(w.create(e,t))};WorkspaceChange.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges){throw new Error("Workspace edit is not configured for document changes.")}};return WorkspaceChange}();t.WorkspaceChange=p;var x;(function(e){function create(e){return{uri:e}}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.string(t.uri)}e.is=is})(x=t.TextDocumentIdentifier||(t.TextDocumentIdentifier={}));var T;(function(e){function create(e,t){return{uri:e,version:t}}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.string(t.uri)&&(t.version===null||Y.number(t.version))}e.is=is})(T=t.VersionedTextDocumentIdentifier||(t.VersionedTextDocumentIdentifier={}));var F;(function(e){function create(e,t,i,n){return{uri:e,languageId:t,version:i,text:n}}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.string(t.uri)&&Y.string(t.languageId)&&Y.number(t.version)&&Y.string(t.text)}e.is=is})(F=t.TextDocumentItem||(t.TextDocumentItem={}));var E;(function(e){e.PlainText="plaintext";e.Markdown="markdown"})(E=t.MarkupKind||(t.MarkupKind={}));(function(e){function is(t){var i=t;return i===e.PlainText||i===e.Markdown}e.is=is})(E=t.MarkupKind||(t.MarkupKind={}));var k;(function(e){function is(e){var t=e;return Y.objectLiteral(e)&&E.is(t.kind)&&Y.string(t.value)}e.is=is})(k=t.MarkupContent||(t.MarkupContent={}));var g;(function(e){e.Text=1;e.Method=2;e.Function=3;e.Constructor=4;e.Field=5;e.Variable=6;e.Class=7;e.Interface=8;e.Module=9;e.Property=10;e.Unit=11;e.Value=12;e.Enum=13;e.Keyword=14;e.Snippet=15;e.Color=16;e.File=17;e.Reference=18;e.Folder=19;e.EnumMember=20;e.Constant=21;e.Struct=22;e.Event=23;e.Operator=24;e.TypeParameter=25})(g=t.CompletionItemKind||(t.CompletionItemKind={}));var L;(function(e){e.PlainText=1;e.Snippet=2})(L=t.InsertTextFormat||(t.InsertTextFormat={}));var O;(function(e){function create(e){return{label:e}}e.create=create})(O=t.CompletionItem||(t.CompletionItem={}));var A;(function(e){function create(e,t){return{items:e?e:[],isIncomplete:!!t}}e.create=create})(A=t.CompletionList||(t.CompletionList={}));var U;(function(e){function fromPlainText(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=fromPlainText;function is(e){var t=e;return Y.string(t)||Y.objectLiteral(t)&&Y.string(t.language)&&Y.string(t.value)}e.is=is})(U=t.MarkedString||(t.MarkedString={}));var j;(function(e){function is(e){var t=e;return!!t&&Y.objectLiteral(t)&&(k.is(t.contents)||U.is(t.contents)||Y.typedArray(t.contents,U.is))&&(e.range===void 0||n.is(e.range))}e.is=is})(j=t.Hover||(t.Hover={}));var N;(function(e){function create(e,t){return t?{label:e,documentation:t}:{label:e}}e.create=create})(N=t.ParameterInformation||(t.ParameterInformation={}));var W;(function(e){function create(e,t){var i=[];for(var n=2;n<arguments.length;n++){i[n-2]=arguments[n]}var r={label:e};if(Y.defined(t)){r.documentation=t}if(Y.defined(i)){r.parameters=i}else{r.parameters=[]}return r}e.create=create})(W=t.SignatureInformation||(t.SignatureInformation={}));var I;(function(e){e.Text=1;e.Read=2;e.Write=3})(I=t.DocumentHighlightKind||(t.DocumentHighlightKind={}));var q;(function(e){function create(e,t){var i={range:e};if(Y.number(t)){i.kind=t}return i}e.create=create})(q=t.DocumentHighlight||(t.DocumentHighlight={}));var $;(function(e){e.File=1;e.Module=2;e.Namespace=3;e.Package=4;e.Class=5;e.Method=6;e.Property=7;e.Field=8;e.Constructor=9;e.Enum=10;e.Interface=11;e.Function=12;e.Variable=13;e.Constant=14;e.String=15;e.Number=16;e.Boolean=17;e.Array=18;e.Object=19;e.Key=20;e.Null=21;e.EnumMember=22;e.Struct=23;e.Event=24;e.Operator=25;e.TypeParameter=26})($=t.SymbolKind||(t.SymbolKind={}));var V;(function(e){function create(e,t,i,n,r){var u={name:e,kind:t,location:{uri:n,range:i}};if(r){u.containerName=r}return u}e.create=create})(V=t.SymbolInformation||(t.SymbolInformation={}));var z=function(){function DocumentSymbol(){}return DocumentSymbol}();t.DocumentSymbol=z;(function(e){function create(e,t,i,n,r,u){var o={name:e,detail:t,kind:i,range:n,selectionRange:r};if(u!==void 0){o.children=u}return o}e.create=create;function is(e){var t=e;return t&&Y.string(t.name)&&Y.number(t.kind)&&n.is(t.range)&&n.is(t.selectionRange)&&(t.detail===void 0||Y.string(t.detail))&&(t.deprecated===void 0||Y.boolean(t.deprecated))&&(t.children===void 0||Array.isArray(t.children))}e.is=is})(z=t.DocumentSymbol||(t.DocumentSymbol={}));t.DocumentSymbol=z;var K;(function(e){e.QuickFix="quickfix";e.Refactor="refactor";e.RefactorExtract="refactor.extract";e.RefactorInline="refactor.inline";e.RefactorRewrite="refactor.rewrite";e.Source="source";e.SourceOrganizeImports="source.organizeImports"})(K=t.CodeActionKind||(t.CodeActionKind={}));var P;(function(e){function create(e,t){var i={diagnostics:e};if(t!==void 0&&t!==null){i.only=t}return i}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.typedArray(t.diagnostics,d.is)&&(t.only===void 0||Y.typedArray(t.only,Y.string))}e.is=is})(P=t.CodeActionContext||(t.CodeActionContext={}));var H;(function(e){function create(e,t,i){var n={title:e};if(m.is(t)){n.command=t}else{n.edit=t}if(i!==void null){n.kind=i}return n}e.create=create;function is(e){var t=e;return t&&Y.string(t.title)&&(t.diagnostics===void 0||Y.typedArray(t.diagnostics,d.is))&&(t.kind===void 0||Y.string(t.kind))&&(t.edit!==void 0||t.command!==void 0)&&(t.command===void 0||m.is(t.command))&&(t.edit===void 0||S.is(t.edit))}e.is=is})(H=t.CodeAction||(t.CodeAction={}));var B;(function(e){function create(e,t){var i={range:e};if(Y.defined(t))i.data=t;return i}e.create=create;function is(e){var t=e;return Y.defined(t)&&n.is(t.range)&&(Y.undefined(t.command)||m.is(t.command))}e.is=is})(B=t.CodeLens||(t.CodeLens={}));var X;(function(e){function create(e,t){return{tabSize:e,insertSpaces:t}}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.number(t.tabSize)&&Y.boolean(t.insertSpaces)}e.is=is})(X=t.FormattingOptions||(t.FormattingOptions={}));var J=function(){function DocumentLink(){}return DocumentLink}();t.DocumentLink=J;(function(e){function create(e,t,i){return{range:e,target:t,data:i}}e.create=create;function is(e){var t=e;return Y.defined(t)&&n.is(t.range)&&(Y.undefined(t.target)||Y.string(t.target))}e.is=is})(J=t.DocumentLink||(t.DocumentLink={}));t.DocumentLink=J;t.EOL=["\n","\r\n","\r"];var Q;(function(e){function create(e,t,i,n){return new Z(e,t,i,n)}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.string(t.uri)&&(Y.undefined(t.languageId)||Y.string(t.languageId))&&Y.number(t.lineCount)&&Y.func(t.getText)&&Y.func(t.positionAt)&&Y.func(t.offsetAt)?true:false}e.is=is;function applyEdits(e,t){var i=e.getText();var n=mergeSort(t,function(e,t){var i=e.range.start.line-t.range.start.line;if(i===0){return e.range.start.character-t.range.start.character}return i});var r=i.length;for(var u=n.length-1;u>=0;u--){var o=n[u];var f=e.offsetAt(o.range.start);var l=e.offsetAt(o.range.end);if(l<=r){i=i.substring(0,f)+o.newText+i.substring(l,i.length)}else{throw new Error("Overlapping edit")}r=f}return i}e.applyEdits=applyEdits;function mergeSort(e,t){if(e.length<=1){return e}var i=e.length/2|0;var n=e.slice(0,i);var r=e.slice(i);mergeSort(n,t);mergeSort(r,t);var u=0;var o=0;var f=0;while(u<n.length&&o<r.length){var l=t(n[u],r[o]);if(l<=0){e[f++]=n[u++]}else{e[f++]=r[o++]}}while(u<n.length){e[f++]=n[u++]}while(o<r.length){e[f++]=r[o++]}return e}})(Q=t.TextDocument||(t.TextDocument={}));var G;(function(e){e.Manual=1;e.AfterDelay=2;e.FocusOut=3})(G=t.TextDocumentSaveReason||(t.TextDocumentSaveReason={}));var Z=function(){function FullTextDocument(e,t,i,n){this._uri=e;this._languageId=t;this._version=i;this._content=n;this._lineOffsets=null}Object.defineProperty(FullTextDocument.prototype,"uri",{get:function(){return this._uri},enumerable:true,configurable:true});Object.defineProperty(FullTextDocument.prototype,"languageId",{get:function(){return this._languageId},enumerable:true,configurable:true});Object.defineProperty(FullTextDocument.prototype,"version",{get:function(){return this._version},enumerable:true,configurable:true});FullTextDocument.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start);var i=this.offsetAt(e.end);return this._content.substring(t,i)}return this._content};FullTextDocument.prototype.update=function(e,t){this._content=e.text;this._version=t;this._lineOffsets=null};FullTextDocument.prototype.getLineOffsets=function(){if(this._lineOffsets===null){var e=[];var t=this._content;var i=true;for(var n=0;n<t.length;n++){if(i){e.push(n);i=false}var r=t.charAt(n);i=r==="\r"||r==="\n";if(r==="\r"&&n+1<t.length&&t.charAt(n+1)==="\n"){n++}}if(i&&t.length>0){e.push(t.length)}this._lineOffsets=e}return this._lineOffsets};FullTextDocument.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets();var n=0,r=t.length;if(r===0){return i.create(0,e)}while(n<r){var u=Math.floor((n+r)/2);if(t[u]>e){r=u}else{n=u+1}}var o=n-1;return i.create(o,e-t[o])};FullTextDocument.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length){return this._content.length}else if(e.line<0){return 0}var i=t[e.line];var n=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(i+e.character,n),i)};Object.defineProperty(FullTextDocument.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:true,configurable:true});return FullTextDocument}();var Y;(function(e){var t=Object.prototype.toString;function defined(e){return typeof e!=="undefined"}e.defined=defined;function undefined(e){return typeof e==="undefined"}e.undefined=undefined;function boolean(e){return e===true||e===false}e.boolean=boolean;function string(e){return t.call(e)==="[object String]"}e.string=string;function number(e){return t.call(e)==="[object Number]"}e.number=number;function func(e){return t.call(e)==="[object Function]"}e.func=func;function objectLiteral(e){return e!==null&&typeof e==="object"}e.objectLiteral=objectLiteral;function typedArray(e,t){return Array.isArray(e)&&e.every(t)}e.typedArray=typedArray})(Y||(Y={}))})},573:function(e,t,i){"use strict";function __export(e){for(var i in e)if(!t.hasOwnProperty(i))t[i]=e[i]}Object.defineProperty(t,"__esModule",{value:true});const n=i(924);t.ErrorCodes=n.ErrorCodes;t.ResponseError=n.ResponseError;t.CancellationToken=n.CancellationToken;t.CancellationTokenSource=n.CancellationTokenSource;t.Disposable=n.Disposable;t.Event=n.Event;t.Emitter=n.Emitter;t.Trace=n.Trace;t.TraceFormat=n.TraceFormat;t.SetTraceNotification=n.SetTraceNotification;t.LogTraceNotification=n.LogTraceNotification;t.RequestType=n.RequestType;t.RequestType0=n.RequestType0;t.NotificationType=n.NotificationType;t.NotificationType0=n.NotificationType0;t.MessageReader=n.MessageReader;t.MessageWriter=n.MessageWriter;t.ConnectionStrategy=n.ConnectionStrategy;t.StreamMessageReader=n.StreamMessageReader;t.StreamMessageWriter=n.StreamMessageWriter;t.IPCMessageReader=n.IPCMessageReader;t.IPCMessageWriter=n.IPCMessageWriter;t.createClientPipeTransport=n.createClientPipeTransport;t.createServerPipeTransport=n.createServerPipeTransport;t.generateRandomPipeName=n.generateRandomPipeName;t.createClientSocketTransport=n.createClientSocketTransport;t.createServerSocketTransport=n.createServerSocketTransport;__export(i(537));__export(i(25));function createProtocolConnection(e,t,i,r){return n.createMessageConnection(e,t,i,r)}t.createProtocolConnection=createProtocolConnection},579:function(e,t){t=e.exports=SemVer;var i;if(typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG))i=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER");console.log.apply(console,e)};else i=function(){};t.SEMVER_SPEC_VERSION="2.0.0";var n=256;var r=Number.MAX_SAFE_INTEGER||9007199254740991;var u=16;var o=t.re=[];var f=t.src=[];var l=0;var s=l++;f[s]="0|[1-9]\\d*";var c=l++;f[c]="[0-9]+";var h=l++;f[h]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var a=l++;f[a]="("+f[s]+")\\."+"("+f[s]+")\\."+"("+f[s]+")";var d=l++;f[d]="("+f[c]+")\\."+"("+f[c]+")\\."+"("+f[c]+")";var m=l++;f[m]="(?:"+f[s]+"|"+f[h]+")";var y=l++;f[y]="(?:"+f[c]+"|"+f[h]+")";var C=l++;f[C]="(?:-("+f[m]+"(?:\\."+f[m]+")*))";var R=l++;f[R]="(?:-?("+f[y]+"(?:\\."+f[y]+")*))";var D=l++;f[D]="[0-9A-Za-z-]+";var w=l++;f[w]="(?:\\+("+f[D]+"(?:\\."+f[D]+")*))";var S=l++;var b="v?"+f[a]+f[C]+"?"+f[w]+"?";f[S]="^"+b+"$";var p="[v=\\s]*"+f[d]+f[R]+"?"+f[w]+"?";var x=l++;f[x]="^"+p+"$";var T=l++;f[T]="((?:<|>)?=?)";var F=l++;f[F]=f[c]+"|x|X|\\*";var E=l++;f[E]=f[s]+"|x|X|\\*";var k=l++;f[k]="[v=\\s]*("+f[E]+")"+"(?:\\.("+f[E]+")"+"(?:\\.("+f[E]+")"+"(?:"+f[C]+")?"+f[w]+"?"+")?)?";var g=l++;f[g]="[v=\\s]*("+f[F]+")"+"(?:\\.("+f[F]+")"+"(?:\\.("+f[F]+")"+"(?:"+f[R]+")?"+f[w]+"?"+")?)?";var L=l++;f[L]="^"+f[T]+"\\s*"+f[k]+"$";var O=l++;f[O]="^"+f[T]+"\\s*"+f[g]+"$";var A=l++;f[A]="(?:^|[^\\d])"+"(\\d{1,"+u+"})"+"(?:\\.(\\d{1,"+u+"}))?"+"(?:\\.(\\d{1,"+u+"}))?"+"(?:$|[^\\d])";var U=l++;f[U]="(?:~>?)";var j=l++;f[j]="(\\s*)"+f[U]+"\\s+";o[j]=new RegExp(f[j],"g");var N="$1~";var W=l++;f[W]="^"+f[U]+f[k]+"$";var I=l++;f[I]="^"+f[U]+f[g]+"$";var q=l++;f[q]="(?:\\^)";var $=l++;f[$]="(\\s*)"+f[q]+"\\s+";o[$]=new RegExp(f[$],"g");var V="$1^";var z=l++;f[z]="^"+f[q]+f[k]+"$";var K=l++;f[K]="^"+f[q]+f[g]+"$";var P=l++;f[P]="^"+f[T]+"\\s*("+p+")$|^$";var H=l++;f[H]="^"+f[T]+"\\s*("+b+")$|^$";var B=l++;f[B]="(\\s*)"+f[T]+"\\s*("+p+"|"+f[k]+")";o[B]=new RegExp(f[B],"g");var X="$1$2$3";var J=l++;f[J]="^\\s*("+f[k]+")"+"\\s+-\\s+"+"("+f[k]+")"+"\\s*$";var Q=l++;f[Q]="^\\s*("+f[g]+")"+"\\s+-\\s+"+"("+f[g]+")"+"\\s*$";var G=l++;f[G]="(<|>)?=?\\s*\\*";for(var Z=0;Z<l;Z++){i(Z,f[Z]);if(!o[Z])o[Z]=new RegExp(f[Z])}t.parse=parse;function parse(e,t){if(!t||typeof t!=="object")t={loose:!!t,includePrerelease:false};if(e instanceof SemVer)return e;if(typeof e!=="string")return null;if(e.length>n)return null;var i=t.loose?o[x]:o[S];if(!i.test(e))return null;try{return new SemVer(e,t)}catch(e){return null}}t.valid=valid;function valid(e,t){var i=parse(e,t);return i?i.version:null}t.clean=clean;function clean(e,t){var i=parse(e.trim().replace(/^[=v]+/,""),t);return i?i.version:null}t.SemVer=SemVer;function SemVer(e,t){if(!t||typeof t!=="object")t={loose:!!t,includePrerelease:false};if(e instanceof SemVer){if(e.loose===t.loose)return e;else e=e.version}else if(typeof e!=="string"){throw new TypeError("Invalid Version: "+e)}if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof SemVer))return new SemVer(e,t);i("SemVer",e,t);this.options=t;this.loose=!!t.loose;var u=e.trim().match(t.loose?o[x]:o[S]);if(!u)throw new TypeError("Invalid Version: "+e);this.raw=e;this.major=+u[1];this.minor=+u[2];this.patch=+u[3];if(this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");if(!u[4])this.prerelease=[];else this.prerelease=u[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e});this.build=u[5]?u[5].split("."):[];this.format()}SemVer.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;if(this.prerelease.length)this.version+="-"+this.prerelease.join(".");return this.version};SemVer.prototype.toString=function(){return this.version};SemVer.prototype.compare=function(e){i("SemVer.compare",this.version,this.options,e);if(!(e instanceof SemVer))e=new SemVer(e,this.options);return this.compareMain(e)||this.comparePre(e)};SemVer.prototype.compareMain=function(e){if(!(e instanceof SemVer))e=new SemVer(e,this.options);return compareIdentifiers(this.major,e.major)||compareIdentifiers(this.minor,e.minor)||compareIdentifiers(this.patch,e.patch)};SemVer.prototype.comparePre=function(e){if(!(e instanceof SemVer))e=new SemVer(e,this.options);if(this.prerelease.length&&!e.prerelease.length)return-1;else if(!this.prerelease.length&&e.prerelease.length)return 1;else if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t];var r=e.prerelease[t];i("prerelease compare",t,n,r);if(n===undefined&&r===undefined)return 0;else if(r===undefined)return 1;else if(n===undefined)return-1;else if(n===r)continue;else return compareIdentifiers(n,r)}while(++t)};SemVer.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",t);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",t);break;case"prepatch":this.prerelease.length=0;this.inc("patch",t);this.inc("pre",t);break;case"prerelease":if(this.prerelease.length===0)this.inc("patch",t);this.inc("pre",t);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0)this.major++;this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0)this.minor++;this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0)this.patch++;this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{var i=this.prerelease.length;while(--i>=0){if(typeof this.prerelease[i]==="number"){this.prerelease[i]++;i=-2}}if(i===-1)this.prerelease.push(0)}if(t){if(this.prerelease[0]===t){if(isNaN(this.prerelease[1]))this.prerelease=[t,0]}else this.prerelease=[t,0]}break;default:throw new Error("invalid increment argument: "+e)}this.format();this.raw=this.version;return this};t.inc=inc;function inc(e,t,i,n){if(typeof i==="string"){n=i;i=undefined}try{return new SemVer(e,i).inc(t,n).version}catch(e){return null}}t.diff=diff;function diff(e,t){if(eq(e,t)){return null}else{var i=parse(e);var n=parse(t);if(i.prerelease.length||n.prerelease.length){for(var r in i){if(r==="major"||r==="minor"||r==="patch"){if(i[r]!==n[r]){return"pre"+r}}}return"prerelease"}for(var r in i){if(r==="major"||r==="minor"||r==="patch"){if(i[r]!==n[r]){return r}}}}}t.compareIdentifiers=compareIdentifiers;var Y=/^[0-9]+$/;function compareIdentifiers(e,t){var i=Y.test(e);var n=Y.test(t);if(i&&n){e=+e;t=+t}return i&&!n?-1:n&&!i?1:e<t?-1:e>t?1:0}t.rcompareIdentifiers=rcompareIdentifiers;function rcompareIdentifiers(e,t){return compareIdentifiers(t,e)}t.major=major;function major(e,t){return new SemVer(e,t).major}t.minor=minor;function minor(e,t){return new SemVer(e,t).minor}t.patch=patch;function patch(e,t){return new SemVer(e,t).patch}t.compare=compare;function compare(e,t,i){return new SemVer(e,i).compare(new SemVer(t,i))}t.compareLoose=compareLoose;function compareLoose(e,t){return compare(e,t,true)}t.rcompare=rcompare;function rcompare(e,t,i){return compare(t,e,i)}t.sort=sort;function sort(e,i){return e.sort(function(e,n){return t.compare(e,n,i)})}t.rsort=rsort;function rsort(e,i){return e.sort(function(e,n){return t.rcompare(e,n,i)})}t.gt=gt;function gt(e,t,i){return compare(e,t,i)>0}t.lt=lt;function lt(e,t,i){return compare(e,t,i)<0}t.eq=eq;function eq(e,t,i){return compare(e,t,i)===0}t.neq=neq;function neq(e,t,i){return compare(e,t,i)!==0}t.gte=gte;function gte(e,t,i){return compare(e,t,i)>=0}t.lte=lte;function lte(e,t,i){return compare(e,t,i)<=0}t.cmp=cmp;function cmp(e,t,i,n){var r;switch(t){case"===":if(typeof e==="object")e=e.version;if(typeof i==="object")i=i.version;r=e===i;break;case"!==":if(typeof e==="object")e=e.version;if(typeof i==="object")i=i.version;r=e!==i;break;case"":case"=":case"==":r=eq(e,i,n);break;case"!=":r=neq(e,i,n);break;case">":r=gt(e,i,n);break;case">=":r=gte(e,i,n);break;case"<":r=lt(e,i,n);break;case"<=":r=lte(e,i,n);break;default:throw new TypeError("Invalid operator: "+t)}return r}t.Comparator=Comparator;function Comparator(e,t){if(!t||typeof t!=="object")t={loose:!!t,includePrerelease:false};if(e instanceof Comparator){if(e.loose===!!t.loose)return e;else e=e.value}if(!(this instanceof Comparator))return new Comparator(e,t);i("comparator",e,t);this.options=t;this.loose=!!t.loose;this.parse(e);if(this.semver===v)this.value="";else this.value=this.operator+this.semver.version;i("comp",this)}var v={};Comparator.prototype.parse=function(e){var t=this.options.loose?o[P]:o[H];var i=e.match(t);if(!i)throw new TypeError("Invalid comparator: "+e);this.operator=i[1];if(this.operator==="=")this.operator="";if(!i[2])this.semver=v;else this.semver=new SemVer(i[2],this.options.loose)};Comparator.prototype.toString=function(){return this.value};Comparator.prototype.test=function(e){i("Comparator.test",e,this.options.loose);if(this.semver===v)return true;if(typeof e==="string")e=new SemVer(e,this.options);return cmp(e,this.operator,this.semver,this.options)};Comparator.prototype.intersects=function(e,t){if(!(e instanceof Comparator)){throw new TypeError("a Comparator is required")}if(!t||typeof t!=="object")t={loose:!!t,includePrerelease:false};var i;if(this.operator===""){i=new Range(e.value,t);return satisfies(this.value,i,t)}else if(e.operator===""){i=new Range(this.value,t);return satisfies(e.semver,i,t)}var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">");var r=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<");var u=this.semver.version===e.semver.version;var o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<=");var f=cmp(this.semver,"<",e.semver,t)&&((this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"));var l=cmp(this.semver,">",e.semver,t)&&((this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">"));return n||r||u&&o||f||l};t.Range=Range;function Range(e,t){if(!t||typeof t!=="object")t={loose:!!t,includePrerelease:false};if(e instanceof Range){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease){return e}else{return new Range(e.raw,t)}}if(e instanceof Comparator){return new Range(e.value,t)}if(!(this instanceof Range))return new Range(e,t);this.options=t;this.loose=!!t.loose;this.includePrerelease=!!t.includePrerelease;this.raw=e;this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length});if(!this.set.length){throw new TypeError("Invalid SemVer Range: "+e)}this.format()}Range.prototype.format=function(){this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim();return this.range};Range.prototype.toString=function(){return this.range};Range.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[Q]:o[J];e=e.replace(n,hyphenReplace);i("hyphen replace",e);e=e.replace(o[B],X);i("comparator trim",e,o[B]);e=e.replace(o[j],N);e=e.replace(o[$],V);e=e.split(/\s+/).join(" ");var r=t?o[P]:o[H];var u=e.split(" ").map(function(e){return parseComparator(e,this.options)},this).join(" ").split(/\s+/);if(this.options.loose){u=u.filter(function(e){return!!e.match(r)})}u=u.map(function(e){return new Comparator(e,this.options)},this);return u};Range.prototype.intersects=function(e,t){if(!(e instanceof Range)){throw new TypeError("a Range is required")}return this.set.some(function(i){return i.every(function(i){return e.set.some(function(e){return e.every(function(e){return i.intersects(e,t)})})})})};t.toComparators=toComparators;function toComparators(e,t){return new Range(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})}function parseComparator(e,t){i("comp",e,t);e=replaceCarets(e,t);i("caret",e);e=replaceTildes(e,t);i("tildes",e);e=replaceXRanges(e,t);i("xrange",e);e=replaceStars(e,t);i("stars",e);return e}function isX(e){return!e||e.toLowerCase()==="x"||e==="*"}function replaceTildes(e,t){return e.trim().split(/\s+/).map(function(e){return replaceTilde(e,t)}).join(" ")}function replaceTilde(e,t){if(!t||typeof t!=="object")t={loose:!!t,includePrerelease:false};var n=t.loose?o[I]:o[W];return e.replace(n,function(t,n,r,u,o){i("tilde",e,t,n,r,u,o);var f;if(isX(n))f="";else if(isX(r))f=">="+n+".0.0 <"+(+n+1)+".0.0";else if(isX(u))f=">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0";else if(o){i("replaceTilde pr",o);if(o.charAt(0)!=="-")o="-"+o;f=">="+n+"."+r+"."+u+o+" <"+n+"."+(+r+1)+".0"}else f=">="+n+"."+r+"."+u+" <"+n+"."+(+r+1)+".0";i("tilde return",f);return f})}function replaceCarets(e,t){return e.trim().split(/\s+/).map(function(e){return replaceCaret(e,t)}).join(" ")}function replaceCaret(e,t){i("caret",e,t);if(!t||typeof t!=="object")t={loose:!!t,includePrerelease:false};var n=t.loose?o[K]:o[z];return e.replace(n,function(t,n,r,u,o){i("caret",e,t,n,r,u,o);var f;if(isX(n))f="";else if(isX(r))f=">="+n+".0.0 <"+(+n+1)+".0.0";else if(isX(u)){if(n==="0")f=">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0";else f=">="+n+"."+r+".0 <"+(+n+1)+".0.0"}else if(o){i("replaceCaret pr",o);if(o.charAt(0)!=="-")o="-"+o;if(n==="0"){if(r==="0")f=">="+n+"."+r+"."+u+o+" <"+n+"."+r+"."+(+u+1);else f=">="+n+"."+r+"."+u+o+" <"+n+"."+(+r+1)+".0"}else f=">="+n+"."+r+"."+u+o+" <"+(+n+1)+".0.0"}else{i("no pr");if(n==="0"){if(r==="0")f=">="+n+"."+r+"."+u+" <"+n+"."+r+"."+(+u+1);else f=">="+n+"."+r+"."+u+" <"+n+"."+(+r+1)+".0"}else f=">="+n+"."+r+"."+u+" <"+(+n+1)+".0.0"}i("caret return",f);return f})}function replaceXRanges(e,t){i("replaceXRanges",e,t);return e.split(/\s+/).map(function(e){return replaceXRange(e,t)}).join(" ")}function replaceXRange(e,t){e=e.trim();if(!t||typeof t!=="object")t={loose:!!t,includePrerelease:false};var n=t.loose?o[O]:o[L];return e.replace(n,function(t,n,r,u,o,f){i("xRange",e,t,n,r,u,o,f);var l=isX(r);var s=l||isX(u);var c=s||isX(o);var h=c;if(n==="="&&h)n="";if(l){if(n===">"||n==="<"){t="<0.0.0"}else{t="*"}}else if(n&&h){if(s)u=0;if(c)o=0;if(n===">"){n=">=";if(s){r=+r+1;u=0;o=0}else if(c){u=+u+1;o=0}}else if(n==="<="){n="<";if(s)r=+r+1;else u=+u+1}t=n+r+"."+u+"."+o}else if(s){t=">="+r+".0.0 <"+(+r+1)+".0.0"}else if(c){t=">="+r+"."+u+".0 <"+r+"."+(+u+1)+".0"}i("xRange return",t);return t})}function replaceStars(e,t){i("replaceStars",e,t);return e.trim().replace(o[G],"")}function hyphenReplace(e,t,i,n,r,u,o,f,l,s,c,h,a){if(isX(i))t="";else if(isX(n))t=">="+i+".0.0";else if(isX(r))t=">="+i+"."+n+".0";else t=">="+t;if(isX(l))f="";else if(isX(s))f="<"+(+l+1)+".0.0";else if(isX(c))f="<"+l+"."+(+s+1)+".0";else if(h)f="<="+l+"."+s+"."+c+"-"+h;else f="<="+f;return(t+" "+f).trim()}Range.prototype.test=function(e){if(!e)return false;if(typeof e==="string")e=new SemVer(e,this.options);for(var t=0;t<this.set.length;t++){if(testSet(this.set[t],e,this.options))return true}return false};function testSet(e,t,n){for(var r=0;r<e.length;r++){if(!e[r].test(t))return false}if(!n)n={};if(t.prerelease.length&&!n.includePrerelease){for(var r=0;r<e.length;r++){i(e[r].semver);if(e[r].semver===v)continue;if(e[r].semver.prerelease.length>0){var u=e[r].semver;if(u.major===t.major&&u.minor===t.minor&&u.patch===t.patch)return true}}return false}return true}t.satisfies=satisfies;function satisfies(e,t,i){try{t=new Range(t,i)}catch(e){return false}return t.test(e)}t.maxSatisfying=maxSatisfying;function maxSatisfying(e,t,i){var n=null;var r=null;try{var u=new Range(t,i)}catch(e){return null}e.forEach(function(e){if(u.test(e)){if(!n||r.compare(e)===-1){n=e;r=new SemVer(n,i)}}});return n}t.minSatisfying=minSatisfying;function minSatisfying(e,t,i){var n=null;var r=null;try{var u=new Range(t,i)}catch(e){return null}e.forEach(function(e){if(u.test(e)){if(!n||r.compare(e)===1){n=e;r=new SemVer(n,i)}}});return n}t.validRange=validRange;function validRange(e,t){try{return new Range(e,t).range||"*"}catch(e){return null}}t.ltr=ltr;function ltr(e,t,i){return outside(e,t,"<",i)}t.gtr=gtr;function gtr(e,t,i){return outside(e,t,">",i)}t.outside=outside;function outside(e,t,i,n){e=new SemVer(e,n);t=new Range(t,n);var r,u,o,f,l;switch(i){case">":r=gt;u=lte;o=lt;f=">";l=">=";break;case"<":r=lt;u=gte;o=gt;f="<";l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(e,t,n)){return false}for(var s=0;s<t.set.length;++s){var c=t.set[s];var h=null;var a=null;c.forEach(function(e){if(e.semver===v){e=new Comparator(">=0.0.0")}h=h||e;a=a||e;if(r(e.semver,h.semver,n)){h=e}else if(o(e.semver,a.semver,n)){a=e}});if(h.operator===f||h.operator===l){return false}if((!a.operator||a.operator===f)&&u(e,a.semver)){return false}else if(a.operator===l&&o(e,a.semver)){return false}}return true}t.prerelease=prerelease;function prerelease(e,t){var i=parse(e,t);return i&&i.prerelease.length?i.prerelease:null}t.intersects=intersects;function intersects(e,t,i){e=new Range(e,i);t=new Range(t,i);return e.intersects(t)}t.coerce=coerce;function coerce(e){if(e instanceof SemVer)return e;if(typeof e!=="string")return null;var t=e.match(o[A]);if(t==null)return null;return parse((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}},589:function(e){e.exports=require("path")},592:function(e,t,i){"use strict";function __export(e){for(var i in e)if(!t.hasOwnProperty(i))t[i]=e[i]}Object.defineProperty(t,"__esModule",{value:true});const n=i(532);const r=i(573);const u=i(790);const o=i(215);const f=i(146);const l=i(201);const s=i(978);__export(i(573));class ConsoleLogger{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}}function createConnection(e,t,i,n){let u=new ConsoleLogger;let o=r.createProtocolConnection(e,t,u);o.onError(e=>{i(e[0],e[1],e[2])});o.onClose(n);let l={listen:()=>o.listen(),sendRequest:(e,...t)=>o.sendRequest(f.string(e)?e:e.method,...t),onRequest:(e,t)=>o.onRequest(f.string(e)?e:e.method,t),sendNotification:(e,t)=>o.sendNotification(f.string(e)?e:e.method,t),onNotification:(e,t)=>o.onNotification(f.string(e)?e:e.method,t),trace:(e,t,i)=>{const n={sendNotification:false,traceFormat:r.TraceFormat.Text};if(i===void 0){o.trace(e,t,n)}else if(f.boolean(i)){o.trace(e,t,i)}else{o.trace(e,t,i)}},initialize:e=>o.sendRequest(r.InitializeRequest.type,e),shutdown:()=>o.sendRequest(r.ShutdownRequest.type,undefined),exit:()=>o.sendNotification(r.ExitNotification.type),onLogMessage:e=>o.onNotification(r.LogMessageNotification.type,e),onShowMessage:e=>o.onNotification(r.ShowMessageNotification.type,e),onTelemetry:e=>o.onNotification(r.TelemetryEventNotification.type,e),didChangeConfiguration:e=>o.sendNotification(r.DidChangeConfigurationNotification.type,e),didChangeWatchedFiles:e=>o.sendNotification(r.DidChangeWatchedFilesNotification.type,e),didOpenTextDocument:e=>o.sendNotification(r.DidOpenTextDocumentNotification.type,e),didChangeTextDocument:e=>o.sendNotification(r.DidChangeTextDocumentNotification.type,e),didCloseTextDocument:e=>o.sendNotification(r.DidCloseTextDocumentNotification.type,e),didSaveTextDocument:e=>o.sendNotification(r.DidSaveTextDocumentNotification.type,e),onDiagnostics:e=>o.onNotification(r.PublishDiagnosticsNotification.type,e),dispose:()=>o.dispose()};return l}var c;(function(e){e[e["Continue"]=1]="Continue";e[e["Shutdown"]=2]="Shutdown"})(c=t.ErrorAction||(t.ErrorAction={}));var h;(function(e){e[e["DoNotRestart"]=1]="DoNotRestart";e[e["Restart"]=2]="Restart"})(h=t.CloseAction||(t.CloseAction={}));class DefaultErrorHandler{constructor(e){this.name=e;this.restarts=[]}error(e,t,i){if(i&&i<=3){return c.Continue}return c.Shutdown}closed(){this.restarts.push(Date.now());if(this.restarts.length<5){return h.Restart}else{let e=this.restarts[this.restarts.length-1]-this.restarts[0];if(e<=3*60*1e3){n.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);return h.DoNotRestart}else{this.restarts.shift();return h.Restart}}}}var a;(function(e){e[e["Info"]=1]="Info";e[e["Warn"]=2]="Warn";e[e["Error"]=3]="Error";e[e["Never"]=4]="Never"})(a=t.RevealOutputChannelOn||(t.RevealOutputChannelOn={}));var d;(function(e){e[e["Stopped"]=1]="Stopped";e[e["Starting"]=3]="Starting";e[e["Running"]=2]="Running"})(d=t.State||(t.State={}));var m;(function(e){e[e["Initial"]=0]="Initial";e[e["Starting"]=1]="Starting";e[e["StartFailed"]=2]="StartFailed";e[e["Running"]=3]="Running";e[e["Stopping"]=4]="Stopping";e[e["Stopped"]=5]="Stopped"})(m||(m={}));const y=[r.SymbolKind.File,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Package,r.SymbolKind.Class,r.SymbolKind.Method,r.SymbolKind.Property,r.SymbolKind.Field,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.Interface,r.SymbolKind.Function,r.SymbolKind.Variable,r.SymbolKind.Constant,r.SymbolKind.String,r.SymbolKind.Number,r.SymbolKind.Boolean,r.SymbolKind.Array,r.SymbolKind.Object,r.SymbolKind.Key,r.SymbolKind.Null,r.SymbolKind.EnumMember,r.SymbolKind.Struct,r.SymbolKind.Event,r.SymbolKind.Operator,r.SymbolKind.TypeParameter];const C=[r.CompletionItemKind.Text,r.CompletionItemKind.Method,r.CompletionItemKind.Function,r.CompletionItemKind.Constructor,r.CompletionItemKind.Field,r.CompletionItemKind.Variable,r.CompletionItemKind.Class,r.CompletionItemKind.Interface,r.CompletionItemKind.Module,r.CompletionItemKind.Property,r.CompletionItemKind.Unit,r.CompletionItemKind.Value,r.CompletionItemKind.Enum,r.CompletionItemKind.Keyword,r.CompletionItemKind.Snippet,r.CompletionItemKind.Color,r.CompletionItemKind.File,r.CompletionItemKind.Reference,r.CompletionItemKind.Folder,r.CompletionItemKind.EnumMember,r.CompletionItemKind.Constant,r.CompletionItemKind.Struct,r.CompletionItemKind.Event,r.CompletionItemKind.Operator,r.CompletionItemKind.TypeParameter];function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}var R;(function(e){function is(e){let t=e;return t&&f.func(t.register)&&f.func(t.unregister)&&f.func(t.dispose)&&t.messages!==void 0}e.is=is})(R||(R={}));class DocumentNotifiactions{constructor(e,t,i,n,r,u){this._client=e;this._event=t;this._type=i;this._middleware=n;this._createParams=r;this._selectorFilter=u;this._selectors=new Map}static textDocumentFilter(e,t){for(const i of e){if(n.languages.match(i,t)){return true}}return false}register(e,t){if(!t.registerOptions.documentSelector){return}if(!this._listener){this._listener=this._event(this.callback,this)}this._selectors.set(t.id,t.registerOptions.documentSelector)}callback(e){if(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)){if(this._middleware){this._middleware(e,e=>this._client.sendNotification(this._type,this._createParams(e)))}else{this._client.sendNotification(this._type,this._createParams(e))}this.notificationSent(e)}}notificationSent(e){}unregister(e){this._selectors.delete(e);if(this._selectors.size===0&&this._listener){this._listener.dispose();this._listener=undefined}}dispose(){this._selectors.clear();if(this._listener){this._listener.dispose();this._listener=undefined}}}class DidOpenTextDocumentFeature extends DocumentNotifiactions{constructor(e,t){super(e,n.workspace.onDidOpenTextDocument,r.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t),DocumentNotifiactions.textDocumentFilter);this._syncedDocuments=t}get messages(){return r.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"synchronization").dynamicRegistration=true}initialize(e,t){let i=e.resolvedTextDocumentSync;if(t&&i&&i.openClose){this.register(this.messages,{id:s.generateUuid(),registerOptions:{documentSelector:t}})}}register(e,t){super.register(e,t);if(!t.registerOptions.documentSelector){return}let i=t.registerOptions.documentSelector;n.workspace.textDocuments.forEach(e=>{let t=e.uri.toString();if(this._syncedDocuments.has(t)){return}if(n.languages.match(i,e)){let i=this._client.clientOptions.middleware;let n=e=>{this._client.sendNotification(this._type,this._createParams(e))};if(i.didOpen){i.didOpen(e,n)}else{n(e)}this._syncedDocuments.set(t,e)}})}notificationSent(e){super.notificationSent(e);this._syncedDocuments.set(e.uri.toString(),e)}}class DidCloseTextDocumentFeature extends DocumentNotifiactions{constructor(e,t){super(e,n.workspace.onDidCloseTextDocument,r.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t),DocumentNotifiactions.textDocumentFilter);this._syncedDocuments=t}get messages(){return r.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"synchronization").dynamicRegistration=true}initialize(e,t){let i=e.resolvedTextDocumentSync;if(t&&i&&i.openClose){this.register(this.messages,{id:s.generateUuid(),registerOptions:{documentSelector:t}})}}notificationSent(e){super.notificationSent(e);this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let i=this._selectors.values();this._syncedDocuments.forEach(e=>{if(n.languages.match(t,e)&&!this._selectorFilter(i,e)){let t=this._client.clientOptions.middleware;let i=e=>{this._client.sendNotification(this._type,this._createParams(e))};this._syncedDocuments.delete(e.uri.toString());if(t.didClose){t.didClose(e,i)}else{i(e)}}})}}class DidChangeTextDocumentFeature{constructor(e){this._client=e;this._changeData=new Map;this._forcingDelivery=false}get messages(){return r.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"synchronization").dynamicRegistration=true}initialize(e,t){let i=e.resolvedTextDocumentSync;if(t&&i&&i.change!==void 0&&i.change!==r.TextDocumentSyncKind.None){this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:i.change})})}}register(e,t){if(!t.registerOptions.documentSelector){return}if(!this._listener){this._listener=n.workspace.onDidChangeTextDocument(this.callback,this)}this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind})}callback(e){if(e.contentChanges.length===0){return}for(const t of this._changeData.values()){if(n.languages.match(t.documentSelector,e.document)){let i=this._client.clientOptions.middleware;if(t.syncKind===r.TextDocumentSyncKind.Incremental){let t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);if(i.didChange){i.didChange(e,()=>this._client.sendNotification(r.DidChangeTextDocumentNotification.type,t))}else{this._client.sendNotification(r.DidChangeTextDocumentNotification.type,t)}}else if(t.syncKind===r.TextDocumentSyncKind.Full){let t=e=>{if(this._changeDelayer){if(this._changeDelayer.uri!==e.document.uri.toString()){this.forceDelivery();this._changeDelayer.uri=e.document.uri.toString()}this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(r.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))})}else{this._changeDelayer={uri:e.document.uri.toString(),delayer:new l.Delayer(200)};this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(r.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))},-1)}};if(i.didChange){i.didChange(e,t)}else{t(e)}}}}}unregister(e){this._changeData.delete(e);if(this._changeData.size===0&&this._listener){this._listener.dispose();this._listener=undefined}}dispose(){this._changeDelayer=undefined;this._forcingDelivery=false;this._changeData.clear();if(this._listener){this._listener.dispose();this._listener=undefined}}forceDelivery(){if(this._forcingDelivery||!this._changeDelayer){return}try{this._forcingDelivery=true;this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=false}}}class WillSaveFeature extends DocumentNotifiactions{constructor(e){super(e,n.workspace.onWillSaveTextDocument,r.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(e,t)=>DocumentNotifiactions.textDocumentFilter(e,t.document))}get messages(){return r.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"synchronization");t.willSave=true}initialize(e,t){let i=e.resolvedTextDocumentSync;if(t&&i&&i.willSave){this.register(this.messages,{id:s.generateUuid(),registerOptions:{documentSelector:t}})}}}class WillSaveWaitUntilFeature{constructor(e){this._client=e;this._selectors=new Map}get messages(){return r.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"synchronization");t.willSaveWaitUntil=true}initialize(e,t){let i=e.resolvedTextDocumentSync;if(t&&i&&i.willSaveWaitUntil){this.register(this.messages,{id:s.generateUuid(),registerOptions:{documentSelector:t}})}}register(e,t){if(!t.registerOptions.documentSelector){return}if(!this._listener){this._listener=n.workspace.onWillSaveTextDocument(this.callback,this)}this._selectors.set(t.id,t.registerOptions.documentSelector)}callback(e){if(DocumentNotifiactions.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware;let i=e=>{return this._client.sendRequest(r.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then(e=>{let t=this._client.protocol2CodeConverter.asTextEdits(e);return t===void 0?[]:t})};e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,i):i(e))}}unregister(e){this._selectors.delete(e);if(this._selectors.size===0&&this._listener){this._listener.dispose();this._listener=undefined}}dispose(){this._selectors.clear();if(this._listener){this._listener.dispose();this._listener=undefined}}}class DidSaveTextDocumentFeature extends DocumentNotifiactions{constructor(e){super(e,n.workspace.onDidSaveTextDocument,r.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),DocumentNotifiactions.textDocumentFilter)}get messages(){return r.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"synchronization").didSave=true}initialize(e,t){let i=e.resolvedTextDocumentSync;if(t&&i&&i.save){this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{includeText:!!i.save.includeText})})}}register(e,t){this._includeText=!!t.registerOptions.includeText;super.register(e,t)}}class FileSystemWatcherFeature{constructor(e,t){this._client=e;this._notifyFileEvent=t;this._watchers=new Map}get messages(){return r.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){ensure(ensure(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=true}initialize(e,t){}register(e,t){if(!Array.isArray(t.registerOptions.watchers)){return}let i=[];for(let e of t.registerOptions.watchers){if(!f.string(e.globPattern)){continue}let t=true,u=true,o=true;if(e.kind!==void 0&&e.kind!==null){t=(e.kind&r.WatchKind.Create)!==0;u=(e.kind&r.WatchKind.Change)!=0;o=(e.kind&r.WatchKind.Delete)!=0}let l=n.workspace.createFileSystemWatcher(e.globPattern,!t,!u,!o);this.hookListeners(l,t,u,o);i.push(l)}this._watchers.set(t.id,i)}registerRaw(e,t){let i=[];for(let e of t){this.hookListeners(e,true,true,true,i)}this._watchers.set(e,i)}hookListeners(e,t,i,n,u){if(t){e.onDidCreate(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Created}),null,u)}if(i){e.onDidChange(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Changed}),null,u)}if(n){e.onDidDelete(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Deleted}),null,u)}}unregister(e){let t=this._watchers.get(e);if(t){for(let e of t){e.dispose()}}}dispose(){this._watchers.forEach(e=>{for(let t of e){t.dispose()}});this._watchers.clear()}}class TextDocumentFeature{constructor(e,t){this._client=e;this._message=t;this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method){throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`)}if(!t.registerOptions.documentSelector){return}let i=this.registerLanguageProvider(t.registerOptions);if(i){this._providers.set(t.id,i)}}unregister(e){let t=this._providers.get(e);if(t){t.dispose()}}dispose(){this._providers.forEach(e=>{e.dispose()});this._providers.clear()}}t.TextDocumentFeature=TextDocumentFeature;class WorkspaceFeature{constructor(e,t){this._client=e;this._message=t;this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method){throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`)}let i=this.registerLanguageProvider(t.registerOptions);if(i){this._providers.set(t.id,i)}}unregister(e){let t=this._providers.get(e);if(t){t.dispose()}}dispose(){this._providers.forEach(e=>{e.dispose()});this._providers.clear()}}class CompletionItemFeature extends TextDocumentFeature{constructor(e){super(e,r.CompletionRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"completion");t.dynamicRegistration=true;t.contextSupport=true;t.completionItem={snippetSupport:true,commitCharactersSupport:true,documentationFormat:[r.MarkupKind.Markdown,r.MarkupKind.PlainText],deprecatedSupport:true,preselectSupport:true};t.completionItemKind={valueSet:C}}initialize(e,t){if(!e.completionProvider||!t){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.completionProvider)})}registerLanguageProvider(e){let t=e.triggerCharacters||[];let i=this._client;let u=(e,t,n,u)=>{return i.sendRequest(r.CompletionRequest.type,i.code2ProtocolConverter.asCompletionParams(e,t,n),u).then(i.protocol2CodeConverter.asCompletionResult,e=>{i.logFailedRequest(r.CompletionRequest.type,e);return Promise.resolve([])})};let o=(e,t)=>{return i.sendRequest(r.CompletionResolveRequest.type,i.code2ProtocolConverter.asCompletionItem(e),t).then(i.protocol2CodeConverter.asCompletionItem,t=>{i.logFailedRequest(r.CompletionResolveRequest.type,t);return Promise.resolve(e)})};let f=this._client.clientOptions.middleware;return n.languages.registerCompletionItemProvider(e.documentSelector,{provideCompletionItems:(e,t,i,n)=>{return f.provideCompletionItem?f.provideCompletionItem(e,t,n,i,u):u(e,t,n,i)},resolveCompletionItem:e.resolveProvider?(e,t)=>{return f.resolveCompletionItem?f.resolveCompletionItem(e,t,o):o(e,t)}:undefined},...t)}}class HoverFeature extends TextDocumentFeature{constructor(e){super(e,r.HoverRequest.type)}fillClientCapabilities(e){const t=ensure(ensure(e,"textDocument"),"hover");t.dynamicRegistration=true;t.contentFormat=[r.MarkupKind.Markdown,r.MarkupKind.PlainText]}initialize(e,t){if(!e.hoverProvider||!t){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client;let i=(e,i,n)=>{return t.sendRequest(r.HoverRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asHover,e=>{t.logFailedRequest(r.HoverRequest.type,e);return Promise.resolve(null)})};let u=t.clientOptions.middleware;return n.languages.registerHoverProvider(e.documentSelector,{provideHover:(e,t,n)=>{return u.provideHover?u.provideHover(e,t,n,i):i(e,t,n)}})}}class SignatureHelpFeature extends TextDocumentFeature{constructor(e){super(e,r.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"signatureHelp");t.dynamicRegistration=true;t.signatureInformation={documentationFormat:[r.MarkupKind.Markdown,r.MarkupKind.PlainText]};t.signatureInformation.parameterInformation={labelOffsetSupport:true}}initialize(e,t){if(!e.signatureHelpProvider||!t){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.signatureHelpProvider)})}registerLanguageProvider(e){let t=this._client;let i=(e,i,n)=>{return t.sendRequest(r.SignatureHelpRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asSignatureHelp,e=>{t.logFailedRequest(r.SignatureHelpRequest.type,e);return Promise.resolve(null)})};let u=t.clientOptions.middleware;let o=e.triggerCharacters||[];return n.languages.registerSignatureHelpProvider(e.documentSelector,{provideSignatureHelp:(e,t,n)=>{return u.provideSignatureHelp?u.provideSignatureHelp(e,t,n,i):i(e,t,n)}},...o)}}class DefinitionFeature extends TextDocumentFeature{constructor(e){super(e,r.DefinitionRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"definition");t.dynamicRegistration=true;t.linkSupport=true}initialize(e,t){if(!e.definitionProvider||!t){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client;let i=(e,i,n)=>{return t.sendRequest(r.DefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asDefinitionResult,e=>{t.logFailedRequest(r.DefinitionRequest.type,e);return Promise.resolve(null)})};let u=t.clientOptions.middleware;return n.languages.registerDefinitionProvider(e.documentSelector,{provideDefinition:(e,t,n)=>{return u.provideDefinition?u.provideDefinition(e,t,n,i):i(e,t,n)}})}}class ReferencesFeature extends TextDocumentFeature{constructor(e){super(e,r.ReferencesRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"references").dynamicRegistration=true}initialize(e,t){if(!e.referencesProvider||!t){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client;let i=(e,i,n,u)=>{return t.sendRequest(r.ReferencesRequest.type,t.code2ProtocolConverter.asReferenceParams(e,i,n),u).then(t.protocol2CodeConverter.asReferences,e=>{t.logFailedRequest(r.ReferencesRequest.type,e);return Promise.resolve([])})};let u=t.clientOptions.middleware;return n.languages.registerReferenceProvider(e.documentSelector,{provideReferences:(e,t,n,r)=>{return u.provideReferences?u.provideReferences(e,t,n,r,i):i(e,t,n,r)}})}}class DocumentHighlightFeature extends TextDocumentFeature{constructor(e){super(e,r.DocumentHighlightRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"documentHighlight").dynamicRegistration=true}initialize(e,t){if(!e.documentHighlightProvider||!t){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client;let i=(e,i,n)=>{return t.sendRequest(r.DocumentHighlightRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asDocumentHighlights,e=>{t.logFailedRequest(r.DocumentHighlightRequest.type,e);return Promise.resolve([])})};let u=t.clientOptions.middleware;return n.languages.registerDocumentHighlightProvider(e.documentSelector,{provideDocumentHighlights:(e,t,n)=>{return u.provideDocumentHighlights?u.provideDocumentHighlights(e,t,n,i):i(e,t,n)}})}}class DocumentSymbolFeature extends TextDocumentFeature{constructor(e){super(e,r.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"documentSymbol");t.dynamicRegistration=true;t.symbolKind={valueSet:y};t.hierarchicalDocumentSymbolSupport=true}initialize(e,t){if(!e.documentSymbolProvider||!t){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client;let i=(e,i)=>{return t.sendRequest(r.DocumentSymbolRequest.type,t.code2ProtocolConverter.asDocumentSymbolParams(e),i).then(e=>{if(e===null){return undefined}if(e.length===0){return[]}else{let i=e[0];if(r.DocumentSymbol.is(i)){return t.protocol2CodeConverter.asDocumentSymbols(e)}else{return t.protocol2CodeConverter.asSymbolInformations(e)}}},e=>{t.logFailedRequest(r.DocumentSymbolRequest.type,e);return Promise.resolve([])})};let u=t.clientOptions.middleware;return n.languages.registerDocumentSymbolProvider(e.documentSelector,{provideDocumentSymbols:(e,t)=>{return u.provideDocumentSymbols?u.provideDocumentSymbols(e,t,i):i(e,t)}})}}class WorkspaceSymbolFeature extends WorkspaceFeature{constructor(e){super(e,r.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"workspace"),"symbol");t.dynamicRegistration=true;t.symbolKind={valueSet:y}}initialize(e){if(!e.workspaceSymbolProvider){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:undefined})}registerLanguageProvider(e){let t=this._client;let i=(e,i)=>{return t.sendRequest(r.WorkspaceSymbolRequest.type,{query:e},i).then(t.protocol2CodeConverter.asSymbolInformations,e=>{t.logFailedRequest(r.WorkspaceSymbolRequest.type,e);return Promise.resolve([])})};let u=t.clientOptions.middleware;return n.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:(e,t)=>{return u.provideWorkspaceSymbols?u.provideWorkspaceSymbols(e,t,i):i(e,t)}})}}class CodeActionFeature extends TextDocumentFeature{constructor(e){super(e,r.CodeActionRequest.type)}fillClientCapabilities(e){const t=ensure(ensure(e,"textDocument"),"codeAction");t.dynamicRegistration=true;t.codeActionLiteralSupport={codeActionKind:{valueSet:["",r.CodeActionKind.QuickFix,r.CodeActionKind.Refactor,r.CodeActionKind.RefactorExtract,r.CodeActionKind.RefactorInline,r.CodeActionKind.RefactorRewrite,r.CodeActionKind.Source,r.CodeActionKind.SourceOrganizeImports]}}}initialize(e,t){if(!e.codeActionProvider||!t){return}let i=undefined;if(!f.boolean(e.codeActionProvider)){i=e.codeActionProvider.codeActionKinds}this.register(this.messages,{id:s.generateUuid(),registerOptions:{documentSelector:t,codeActionKinds:i}})}registerLanguageProvider(e){let t=this._client;let i=(e,i,n,u)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(i),context:t.code2ProtocolConverter.asCodeActionContext(n)};return t.sendRequest(r.CodeActionRequest.type,o,u).then(e=>{if(e===null){return undefined}let i=[];for(let n of e){if(r.Command.is(n)){i.push(t.protocol2CodeConverter.asCommand(n))}else{i.push(t.protocol2CodeConverter.asCodeAction(n))}}return i},e=>{t.logFailedRequest(r.CodeActionRequest.type,e);return Promise.resolve([])})};let u=t.clientOptions.middleware;return n.languages.registerCodeActionsProvider(e.documentSelector,{provideCodeActions:(e,t,n,r)=>{return u.provideCodeActions?u.provideCodeActions(e,t,n,r,i):i(e,t,n,r)}},e.codeActionKinds?{providedCodeActionKinds:t.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:undefined)}}class CodeLensFeature extends TextDocumentFeature{constructor(e){super(e,r.CodeLensRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"codeLens").dynamicRegistration=true}initialize(e,t){if(!e.codeLensProvider||!t){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.codeLensProvider)})}registerLanguageProvider(e){let t=this._client;let i=(e,i)=>{return t.sendRequest(r.CodeLensRequest.type,t.code2ProtocolConverter.asCodeLensParams(e),i).then(t.protocol2CodeConverter.asCodeLenses,e=>{t.logFailedRequest(r.CodeLensRequest.type,e);return Promise.resolve([])})};let u=(e,i)=>{return t.sendRequest(r.CodeLensResolveRequest.type,t.code2ProtocolConverter.asCodeLens(e),i).then(t.protocol2CodeConverter.asCodeLens,i=>{t.logFailedRequest(r.CodeLensResolveRequest.type,i);return e})};let o=t.clientOptions.middleware;return n.languages.registerCodeLensProvider(e.documentSelector,{provideCodeLenses:(e,t)=>{return o.provideCodeLenses?o.provideCodeLenses(e,t,i):i(e,t)},resolveCodeLens:e.resolveProvider?(e,t)=>{return o.resolveCodeLens?o.resolveCodeLens(e,t,u):u(e,t)}:undefined})}}class DocumentFormattingFeature extends TextDocumentFeature{constructor(e){super(e,r.DocumentFormattingRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"formatting").dynamicRegistration=true}initialize(e,t){if(!e.documentFormattingProvider||!t){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client;let i=(e,i,n)=>{let u={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),options:t.code2ProtocolConverter.asFormattingOptions(i)};return t.sendRequest(r.DocumentFormattingRequest.type,u,n).then(t.protocol2CodeConverter.asTextEdits,e=>{t.logFailedRequest(r.DocumentFormattingRequest.type,e);return Promise.resolve([])})};let u=t.clientOptions.middleware;return n.languages.registerDocumentFormattingEditProvider(e.documentSelector,{provideDocumentFormattingEdits:(e,t,n)=>{return u.provideDocumentFormattingEdits?u.provideDocumentFormattingEdits(e,t,n,i):i(e,t,n)}})}}class DocumentRangeFormattingFeature extends TextDocumentFeature{constructor(e){super(e,r.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"rangeFormatting").dynamicRegistration=true}initialize(e,t){if(!e.documentRangeFormattingProvider||!t){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client;let i=(e,i,n,u)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(i),options:t.code2ProtocolConverter.asFormattingOptions(n)};return t.sendRequest(r.DocumentRangeFormattingRequest.type,o,u).then(t.protocol2CodeConverter.asTextEdits,e=>{t.logFailedRequest(r.DocumentRangeFormattingRequest.type,e);return Promise.resolve([])})};let u=t.clientOptions.middleware;return n.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,{provideDocumentRangeFormattingEdits:(e,t,n,r)=>{return u.provideDocumentRangeFormattingEdits?u.provideDocumentRangeFormattingEdits(e,t,n,r,i):i(e,t,n,r)}})}}class DocumentOnTypeFormattingFeature extends TextDocumentFeature{constructor(e){super(e,r.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"onTypeFormatting").dynamicRegistration=true}initialize(e,t){if(!e.documentOnTypeFormattingProvider||!t){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentOnTypeFormattingProvider)})}registerLanguageProvider(e){let t=this._client;let i=e.moreTriggerCharacter||[];let u=(e,i,n,u,o)=>{let f={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(i),ch:n,options:t.code2ProtocolConverter.asFormattingOptions(u)};return t.sendRequest(r.DocumentOnTypeFormattingRequest.type,f,o).then(t.protocol2CodeConverter.asTextEdits,e=>{t.logFailedRequest(r.DocumentOnTypeFormattingRequest.type,e);return Promise.resolve([])})};let o=t.clientOptions.middleware;return n.languages.registerOnTypeFormattingEditProvider(e.documentSelector,{provideOnTypeFormattingEdits:(e,t,i,n,r)=>{return o.provideOnTypeFormattingEdits?o.provideOnTypeFormattingEdits(e,t,i,n,r,u):u(e,t,i,n,r)}},e.firstTriggerCharacter,...i)}}class RenameFeature extends TextDocumentFeature{constructor(e){super(e,r.RenameRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"rename");t.dynamicRegistration=true;t.prepareSupport=true}initialize(e,t){if(!e.renameProvider||!t){return}let i=Object.assign({},{documentSelector:t});if(f.boolean(e.renameProvider)){i.prepareProvider=false}else{i.prepareProvider=e.renameProvider.prepareProvider}this.register(this.messages,{id:s.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=this._client;let i=(e,i,n,u)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(i),newName:n};return t.sendRequest(r.RenameRequest.type,o,u).then(t.protocol2CodeConverter.asWorkspaceEdit,e=>{t.logFailedRequest(r.RenameRequest.type,e);return Promise.reject(new Error(e.message))})};let u=(e,i,n)=>{let u={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(i)};return t.sendRequest(r.PrepareRenameRequest.type,u,n).then(e=>{if(r.Range.is(e)){return t.protocol2CodeConverter.asRange(e)}else if(e&&e.range){return{range:t.protocol2CodeConverter.asRange(e.range),placeholder:e.placeholder}}return null},e=>{t.logFailedRequest(r.PrepareRenameRequest.type,e);return Promise.reject(new Error(e.message))})};let o=t.clientOptions.middleware;return n.languages.registerRenameProvider(e.documentSelector,{provideRenameEdits:(e,t,n,r)=>{return o.provideRenameEdits?o.provideRenameEdits(e,t,n,r,i):i(e,t,n,r)},prepareRename:e.prepareProvider?(e,t,i)=>{return o.prepareRename?o.prepareRename(e,t,i,u):u(e,t,i)}:undefined})}}class DocumentLinkFeature extends TextDocumentFeature{constructor(e){super(e,r.DocumentLinkRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"documentLink").dynamicRegistration=true}initialize(e,t){if(!e.documentLinkProvider||!t){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentLinkProvider)})}registerLanguageProvider(e){let t=this._client;let i=(e,i)=>{return t.sendRequest(r.DocumentLinkRequest.type,t.code2ProtocolConverter.asDocumentLinkParams(e),i).then(t.protocol2CodeConverter.asDocumentLinks,e=>{t.logFailedRequest(r.DocumentLinkRequest.type,e);Promise.resolve(new Error(e.message))})};let u=(e,i)=>{return t.sendRequest(r.DocumentLinkResolveRequest.type,t.code2ProtocolConverter.asDocumentLink(e),i).then(t.protocol2CodeConverter.asDocumentLink,e=>{t.logFailedRequest(r.DocumentLinkResolveRequest.type,e);Promise.resolve(new Error(e.message))})};let o=t.clientOptions.middleware;return n.languages.registerDocumentLinkProvider(e.documentSelector,{provideDocumentLinks:(e,t)=>{return o.provideDocumentLinks?o.provideDocumentLinks(e,t,i):i(e,t)},resolveDocumentLink:e.resolveProvider?(e,t)=>{return o.resolveDocumentLink?o.resolveDocumentLink(e,t,u):u(e,t)}:undefined})}}class ConfigurationFeature{constructor(e){this._client=e;this._listeners=new Map}get messages(){return r.DidChangeConfigurationNotification.type}fillClientCapabilities(e){ensure(ensure(e,"workspace"),"didChangeConfiguration").dynamicRegistration=true}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;if(e!==void 0){this.register(this.messages,{id:s.generateUuid(),registerOptions:{section:e}})}}register(e,t){let i=n.workspace.onDidChangeConfiguration(e=>{this.onDidChangeConfiguration(t.registerOptions.section,e)});this._listeners.set(t.id,i);if(t.registerOptions.section!==void 0){this.onDidChangeConfiguration(t.registerOptions.section,undefined)}}unregister(e){let t=this._listeners.get(e);if(t){this._listeners.delete(e);t.dispose()}}dispose(){for(let e of this._listeners.values()){e.dispose()}this._listeners.clear()}onDidChangeConfiguration(e,t){let i;if(f.string(e)){i=[e]}else{i=e}if(i!==void 0&&t!==void 0){let e=i.some(e=>t.affectsConfiguration(e));if(!e){return}}let n=e=>{if(e===void 0){this._client.sendNotification(r.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(r.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)})};let u=this.getMiddleware();u?u(i,n):n(i)}extractSettingsInformation(e){function ensurePath(e,t){let i=e;for(let e=0;e<t.length-1;e++){let n=i[t[e]];if(!n){n=Object.create(null);i[t[e]]=n}i=n}return i}let t=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:undefined;let i=Object.create(null);for(let r=0;r<e.length;r++){let u=e[r];let o=u.indexOf(".");let f=null;if(o>=0){f=n.workspace.getConfiguration(u.substr(0,o),t).get(u.substr(o+1))}else{f=n.workspace.getConfiguration(u,t)}if(f){let t=e[r].split(".");ensurePath(i,t)[t[t.length-1]]=f}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration){return e.workspace.didChangeConfiguration}else{return undefined}}}class ExecuteCommandFeature{constructor(e){this._client=e;this._commands=new Map}get messages(){return r.ExecuteCommandRequest.type}fillClientCapabilities(e){ensure(ensure(e,"workspace"),"executeCommand").dynamicRegistration=true}initialize(e){if(!e.executeCommandProvider){return}this.register(this.messages,{id:s.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,t){let i=this._client;if(t.registerOptions.commands){let e=[];for(const u of t.registerOptions.commands){e.push(n.commands.registerCommand(u,(...e)=>{let t={command:u,arguments:e};return i.sendRequest(r.ExecuteCommandRequest.type,t).then(undefined,e=>{i.logFailedRequest(r.ExecuteCommandRequest.type,e)})}))}this._commands.set(t.id,e)}}unregister(e){let t=this._commands.get(e);if(t){t.forEach(e=>e.dispose())}}dispose(){this._commands.forEach(e=>{e.forEach(e=>e.dispose())});this._commands.clear()}}var D;(function(e){function is(e){let t=e;return t&&r.MessageReader.is(e.reader)&&r.MessageWriter.is(e.writer)}e.is=is})(D=t.MessageTransports||(t.MessageTransports={}));class OnReady{constructor(e,t){this._resolve=e;this._reject=t;this._used=false}get isUsed(){return this._used}resolve(){this._used=true;this._resolve()}reject(e){this._used=true;this._reject(e)}}class BaseLanguageClient{constructor(e,t,i){this._traceFormat=r.TraceFormat.Text;this._features=[];this._method2Message=new Map;this._dynamicFeatures=new Map;this._id=e;this._name=t;i=i||{};this._clientOptions={documentSelector:i.documentSelector||[],synchronize:i.synchronize||{},diagnosticCollectionName:i.diagnosticCollectionName,outputChannelName:i.outputChannelName||this._name,revealOutputChannelOn:i.revealOutputChannelOn||a.Error,stdioEncoding:i.stdioEncoding||"utf8",initializationOptions:i.initializationOptions,initializationFailedHandler:i.initializationFailedHandler,errorHandler:i.errorHandler||new DefaultErrorHandler(this._name),middleware:i.middleware||{},uriConverters:i.uriConverters,workspaceFolder:i.workspaceFolder};this._clientOptions.synchronize=this._clientOptions.synchronize||{};this.state=m.Initial;this._connectionPromise=undefined;this._resolvedConnection=undefined;this._initializeResult=undefined;if(i.outputChannel){this._outputChannel=i.outputChannel;this._disposeOutputChannel=false}else{this._outputChannel=undefined;this._disposeOutputChannel=true}this._listeners=undefined;this._providers=undefined;this._diagnostics=undefined;this._fileEvents=[];this._fileEventDelayer=new l.Delayer(250);this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new OnReady(e,t)});this._onStop=undefined;this._telemetryEmitter=new r.Emitter;this._stateChangeEmitter=new r.Emitter;this._tracer={log:(e,t)=>{if(f.string(e)){this.logTrace(e,t)}else{this.logObjectTrace(e)}}};this._c2p=u.createConverter(i.uriConverters?i.uriConverters.code2Protocol:undefined);this._p2c=o.createConverter(i.uriConverters?i.uriConverters.protocol2Code:undefined);this._syncedDocuments=new Map;this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let i=this.getPublicState();if(i!==t){this._stateChangeEmitter.fire({oldState:t,newState:i})}}getPublicState(){if(this.state===m.Running){return d.Running}else if(this.state===m.Starting){return d.Starting}else{return d.Stopped}}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet")}this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(t){this.error(`Sending request ${f.string(e)?e:e.method} failed.`,t);throw t}}onRequest(e,t){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet")}try{this._resolvedConnection.onRequest(e,t)}catch(t){this.error(`Registering request handler ${f.string(e)?e:e.method} failed.`,t);throw t}}sendNotification(e,t){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet")}this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(t){this.error(`Sending notification ${f.string(e)?e:e.method} failed.`,t);throw t}}onNotification(e,t){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet")}try{this._resolvedConnection.onNotification(e,t)}catch(t){this.error(`Registering notification handler ${f.string(e)?e:e.method} failed.`,t);throw t}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){if(!this._outputChannel){this._outputChannel=n.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)}return this._outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new DefaultErrorHandler(this._name)}set trace(e){this._trace=e;this.onReady().then(()=>{this.resolveConnection().then(e=>{e.trace(this._trace,this._tracer,{sendNotification:false,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof r.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}if(e instanceof Error){if(f.string(e.stack)){return e.stack}return e.message}if(f.string(e)){return e}return e.toString()}info(e,t){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${e}`);if(t){this.outputChannel.appendLine(this.data2String(t))}if(this._clientOptions.revealOutputChannelOn<=a.Info){this.outputChannel.show(true)}}warn(e,t){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${e}`);if(t){this.outputChannel.appendLine(this.data2String(t))}if(this._clientOptions.revealOutputChannelOn<=a.Warn){this.outputChannel.show(true)}}error(e,t){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`);if(t){this.outputChannel.appendLine(this.data2String(t))}if(this._clientOptions.revealOutputChannelOn<=a.Error){this.outputChannel.show(true)}}logTrace(e,t){this.outputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`);if(t){this.outputChannel.appendLine(this.data2String(t))}}logObjectTrace(e){if(e.isLSPMessage&&e.type){this.outputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `)}else{this.outputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `)}if(e){this.outputChannel.appendLine(`${JSON.stringify(e)}`)}}needsStart(){return this.state===m.Initial||this.state===m.Stopping||this.state===m.Stopped}needsStop(){return this.state===m.Starting||this.state===m.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===m.Running&&!!this._resolvedConnection}start(){if(this._onReadyCallbacks.isUsed){this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new OnReady(e,t)})}this._listeners=[];this._providers=[];if(!this._diagnostics){this._diagnostics=this._clientOptions.diagnosticCollectionName?n.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):n.languages.createDiagnosticCollection()}this.state=m.Starting;this.resolveConnection().then(e=>{e.onLogMessage(e=>{switch(e.type){case r.MessageType.Error:this.error(e.message);break;case r.MessageType.Warning:this.warn(e.message);break;case r.MessageType.Info:this.info(e.message);break;default:this.outputChannel.appendLine(e.message)}});e.onShowMessage(e=>{switch(e.type){case r.MessageType.Error:n.window.showErrorMessage(e.message);break;case r.MessageType.Warning:n.window.showWarningMessage(e.message);break;case r.MessageType.Info:n.window.showInformationMessage(e.message);break;default:n.window.showInformationMessage(e.message)}});e.onRequest(r.ShowMessageRequest.type,e=>{let t;switch(e.type){case r.MessageType.Error:t=n.window.showErrorMessage;break;case r.MessageType.Warning:t=n.window.showWarningMessage;break;case r.MessageType.Info:t=n.window.showInformationMessage;break;default:t=n.window.showInformationMessage}let i=e.actions||[];return t(e.message,...i)});e.onTelemetry(e=>{this._telemetryEmitter.fire(e)});e.listen();return this.initialize(e)}).then(undefined,e=>{this.state=m.StartFailed;this._onReadyCallbacks.reject(e);this.error("Starting client failed",e);n.window.showErrorMessage(`Couldn't start client ${this._name}`)});return new n.Disposable(()=>{if(this.needsStop()){this.stop()}})}resolveConnection(){if(!this._connectionPromise){this._connectionPromise=this.createConnection()}return this._connectionPromise}initialize(e){this.refreshTrace(e,false);let t=this._clientOptions.initializationOptions;let i=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath();let u={processId:process.pid,rootPath:i?i:null,rootUri:i?this._c2p.asUri(n.Uri.file(i)):null,capabilities:this.computeClientCapabilities(),initializationOptions:f.func(t)?t():t,trace:r.Trace.toString(this._trace),workspaceFolders:null};this.fillInitializeParams(u);return e.initialize(u).then(t=>{this._resolvedConnection=e;this._initializeResult=t;this.state=m.Running;let i=undefined;if(f.number(t.capabilities.textDocumentSync)){if(t.capabilities.textDocumentSync===r.TextDocumentSyncKind.None){i={openClose:false,change:r.TextDocumentSyncKind.None,save:undefined}}else{i={openClose:true,change:t.capabilities.textDocumentSync,save:{includeText:false}}}}else if(t.capabilities.textDocumentSync!==void 0&&t.capabilities.textDocumentSync!==null){i=t.capabilities.textDocumentSync}this._capabilities=Object.assign({},t.capabilities,{resolvedTextDocumentSync:i});e.onDiagnostics(e=>this.handleDiagnostics(e));e.onRequest(r.RegistrationRequest.type,e=>this.handleRegistrationRequest(e));e.onRequest("client/registerFeature",e=>this.handleRegistrationRequest(e));e.onRequest(r.UnregistrationRequest.type,e=>this.handleUnregistrationRequest(e));e.onRequest("client/unregisterFeature",e=>this.handleUnregistrationRequest(e));e.onRequest(r.ApplyWorkspaceEditRequest.type,e=>this.handleApplyWorkspaceEdit(e));e.sendNotification(r.InitializedNotification.type,{});this.hookFileEvents(e);this.hookConfigurationChanged(e);this.initializeFeatures(e);this._onReadyCallbacks.resolve();return t}).then(undefined,t=>{if(this._clientOptions.initializationFailedHandler){if(this._clientOptions.initializationFailedHandler(t)){this.initialize(e)}else{this.stop();this._onReadyCallbacks.reject(t)}}else if(t instanceof r.ResponseError&&t.data&&t.data.retry){n.window.showErrorMessage(t.message,{title:"Retry",id:"retry"}).then(i=>{if(i&&i.id==="retry"){this.initialize(e)}else{this.stop();this._onReadyCallbacks.reject(t)}})}else{if(t&&t.message){n.window.showErrorMessage(t.message)}this.error("Server initialization failed.",t);this.stop();this._onReadyCallbacks.reject(t)}})}_clientGetRootPath(){let e=n.workspace.workspaceFolders;if(!e||e.length===0){return undefined}let t=e[0];if(t.uri.scheme==="file"){return t.uri.fsPath}return undefined}stop(){this._initializeResult=undefined;if(!this._connectionPromise){this.state=m.Stopped;return Promise.resolve()}if(this.state===m.Stopping&&this._onStop){return this._onStop}this.state=m.Stopping;this.cleanUp();return this._onStop=this.resolveConnection().then(e=>{return e.shutdown().then(()=>{e.exit();e.dispose();this.state=m.Stopped;this._onStop=undefined;this._connectionPromise=undefined;this._resolvedConnection=undefined})})}cleanUp(e=true,t=true){if(this._listeners){this._listeners.forEach(e=>e.dispose());this._listeners=undefined}if(this._providers){this._providers.forEach(e=>e.dispose());this._providers=undefined}if(this._syncedDocuments){this._syncedDocuments.clear()}for(let e of this._dynamicFeatures.values()){e.dispose()}if(e&&this._outputChannel&&this._disposeOutputChannel){this._outputChannel.dispose();this._outputChannel=undefined}if(t&&this._diagnostics){this._diagnostics.dispose();this._diagnostics=undefined}}notifyFileEvent(e){this._fileEvents.push(e);this._fileEventDelayer.trigger(()=>{this.onReady().then(()=>{this.resolveConnection().then(e=>{if(this.isConnectionActive()){e.didChangeWatchedFiles({changes:this._fileEvents})}this._fileEvents=[]})},e=>{this.error(`Notify file events failed.`,e)})})}forceDocumentSync(){this._dynamicFeatures.get(r.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics){return}let t=this._p2c.asUri(e.uri);let i=this._p2c.asDiagnostics(e.diagnostics);let n=this.clientOptions.middleware.handleDiagnostics;if(n){n(t,i,(e,t)=>this.setDiagnostics(e,t))}else{this.setDiagnostics(t,i)}}setDiagnostics(e,t){if(!this._diagnostics){return}this._diagnostics.set(e,t)}createConnection(){let e=(e,t,i)=>{this.handleConnectionError(e,t,i)};let t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(i=>{return createConnection(i.reader,i.writer,e,t)})}handleConnectionClosed(){if(this.state===m.Stopping||this.state===m.Stopped){return}try{if(this._resolvedConnection){this._resolvedConnection.dispose()}}catch(e){}let e=h.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch(e){}this._connectionPromise=undefined;this._resolvedConnection=undefined;if(e===h.DoNotRestart){this.error("Connection to server got closed. Server will not be restarted.");this.state=m.Stopped;this.cleanUp(false,true)}else if(e===h.Restart){this.info("Connection to server got closed. Server will restart.");this.cleanUp(false,false);this.state=m.Initial;this.start()}}handleConnectionError(e,t,i){let n=this._clientOptions.errorHandler.error(e,t,i);if(n===c.Shutdown){this.error("Connection to server is erroring. Shutting down server.");this.stop()}}hookConfigurationChanged(e){n.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,true)})}refreshTrace(e,t=false){let i=n.workspace.getConfiguration(this._id);let u=r.Trace.Off;let o=r.TraceFormat.Text;if(i){const e=i.get("trace.server","off");if(typeof e==="string"){u=r.Trace.fromString(e)}else{u=r.Trace.fromString(i.get("trace.server.verbosity","off"));o=r.TraceFormat.fromString(i.get("trace.server.format","text"))}}this._trace=u;this._traceFormat=o;e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t){return}let i;if(f.array(t)){i=t}else{i=[t]}if(!i){return}this._dynamicFeatures.get(r.DidChangeWatchedFilesNotification.type.method).registerRaw(s.generateUuid(),i)}registerFeatures(e){for(let t of e){this.registerFeature(t)}}registerFeature(e){this._features.push(e);if(R.is(e)){let t=e.messages;if(Array.isArray(t)){for(let i of t){this._method2Message.set(i.method,i);this._dynamicFeatures.set(i.method,e)}}else{this._method2Message.set(t.method,t);this._dynamicFeatures.set(t.method,e)}}}registerBuiltinFeatures(){this.registerFeature(new ConfigurationFeature(this));this.registerFeature(new DidOpenTextDocumentFeature(this,this._syncedDocuments));this.registerFeature(new DidChangeTextDocumentFeature(this));this.registerFeature(new WillSaveFeature(this));this.registerFeature(new WillSaveWaitUntilFeature(this));this.registerFeature(new DidSaveTextDocumentFeature(this));this.registerFeature(new DidCloseTextDocumentFeature(this,this._syncedDocuments));this.registerFeature(new FileSystemWatcherFeature(this,e=>this.notifyFileEvent(e)));this.registerFeature(new CompletionItemFeature(this));this.registerFeature(new HoverFeature(this));this.registerFeature(new SignatureHelpFeature(this));this.registerFeature(new DefinitionFeature(this));this.registerFeature(new ReferencesFeature(this));this.registerFeature(new DocumentHighlightFeature(this));this.registerFeature(new DocumentSymbolFeature(this));this.registerFeature(new WorkspaceSymbolFeature(this));this.registerFeature(new CodeActionFeature(this));this.registerFeature(new CodeLensFeature(this));this.registerFeature(new DocumentFormattingFeature(this));this.registerFeature(new DocumentRangeFormattingFeature(this));this.registerFeature(new DocumentOnTypeFormattingFeature(this));this.registerFeature(new RenameFeature(this));this.registerFeature(new DocumentLinkFeature(this));this.registerFeature(new ExecuteCommandFeature(this))}fillInitializeParams(e){for(let t of this._features){if(f.func(t.fillInitializeParams)){t.fillInitializeParams(e)}}}computeClientCapabilities(){let e={};ensure(e,"workspace").applyEdit=true;let t=ensure(ensure(e,"workspace"),"workspaceEdit");t.documentChanges=true;t.resourceOperations=[r.ResourceOperationKind.Create,r.ResourceOperationKind.Rename,r.ResourceOperationKind.Delete];t.failureHandling=r.FailureHandlingKind.TextOnlyTransactional;ensure(ensure(e,"textDocument"),"publishDiagnostics").relatedInformation=true;for(let t of this._features){t.fillClientCapabilities(e)}return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let e of this._features){e.initialize(this._capabilities,t)}}handleRegistrationRequest(e){return new Promise((t,i)=>{for(let t of e.registrations){const e=this._dynamicFeatures.get(t.method);if(!e){i(new Error(`No feature implementation for ${t.method} found. Registration failed.`));return}const n=t.registerOptions||{};n.documentSelector=n.documentSelector||this._clientOptions.documentSelector;const r={id:t.id,registerOptions:n};e.register(this._method2Message.get(t.method),r)}t()})}handleUnregistrationRequest(e){return new Promise((t,i)=>{for(let t of e.unregisterations){const e=this._dynamicFeatures.get(t.method);if(!e){i(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));return}e.unregister(t.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit;let i=new Map;n.workspace.textDocuments.forEach(e=>i.set(e.uri.toString(),e));let u=false;if(t.documentChanges){for(const e of t.documentChanges){if(r.TextDocumentEdit.is(e)&&e.textDocument.version&&e.textDocument.version>=0){let t=i.get(e.textDocument.uri);if(t&&t.version!==e.textDocument.version){u=true;break}}}}if(u){return Promise.resolve({applied:false})}return n.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(e=>{return{applied:e}})}logFailedRequest(e,t){if(t instanceof r.ResponseError&&t.code===r.ErrorCodes.RequestCancelled){return}this.error(`Request ${e.method} failed.`,t)}}t.BaseLanguageClient=BaseLanguageClient},645:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(532);class ProtocolDocumentLink extends n.DocumentLink{constructor(e,t){super(e,t)}}t.default=ProtocolDocumentLink},657:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(924);let r;var u;(function(e){e.type=new n.RequestType("textDocument/typeDefinition")})(u=t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},664:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(924);let r;var u;(function(e){e.type=new n.RequestType("textDocument/implementation")})(u=t.ImplementationRequest||(t.ImplementationRequest={}))},678:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(532);class ProtocolCodeLens extends n.CodeLens{constructor(e){super(e)}}t.default=ProtocolCodeLens},713:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(532);const r=i(573);class ConfigurationFeature{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{};e.workspace.configuration=true}initialize(){let e=this._client;e.onRequest(r.ConfigurationRequest.type,(t,i)=>{let n=e=>{let t=[];for(let i of e.items){let e=i.scopeUri!==void 0&&i.scopeUri!==null?this._client.protocol2CodeConverter.asUri(i.scopeUri):undefined;t.push(this.getConfiguration(e,i.section!==null?i.section:undefined))}return t};let r=e.clientOptions.middleware.workspace;return r&&r.configuration?r.configuration(t,i,n):n(t,i)})}getConfiguration(e,t){let i=null;if(t){let r=t.lastIndexOf(".");if(r===-1){i=n.workspace.getConfiguration(undefined,e).get(t)}else{let e=n.workspace.getConfiguration(t.substr(0,r));if(e){i=e.get(t.substr(r+1))}}}else{let t=n.workspace.getConfiguration(undefined,e);i={};for(let e of Object.keys(t)){if(t.has(e)){i[e]=t.get(e)}}}if(!i){return null}return i}}t.ConfigurationFeature=ConfigurationFeature},735:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(924);var r;(function(e){e.type=new n.RequestType("textDocument/documentColor")})(r=t.DocumentColorRequest||(t.DocumentColorRequest={}));var u;(function(e){e.type=new n.RequestType("textDocument/colorPresentation")})(u=t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},760:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i;(function(e){function create(e){return{dispose:e}}e.create=create})(i=t.Disposable||(t.Disposable={}));var n;(function(e){const t={dispose(){}};e.None=function(){return t}})(n=t.Event||(t.Event={}));class CallbackList{add(e,t=null,i){if(!this._callbacks){this._callbacks=[];this._contexts=[]}this._callbacks.push(e);this._contexts.push(t);if(Array.isArray(i)){i.push({dispose:()=>this.remove(e,t)})}}remove(e,t=null){if(!this._callbacks){return}var i=false;for(var n=0,r=this._callbacks.length;n<r;n++){if(this._callbacks[n]===e){if(this._contexts[n]===t){this._callbacks.splice(n,1);this._contexts.splice(n,1);return}else{i=true}}}if(i){throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks){return[]}var t=[],i=this._callbacks.slice(0),n=this._contexts.slice(0);for(var r=0,u=i.length;r<u;r++){try{t.push(i[r].apply(n[r],e))}catch(e){console.error(e)}}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=undefined;this._contexts=undefined}}class Emitter{constructor(e){this._options=e}get event(){if(!this._event){this._event=((e,t,i)=>{if(!this._callbacks){this._callbacks=new CallbackList}if(this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()){this._options.onFirstListenerAdd(this)}this._callbacks.add(e,t);let n;n={dispose:()=>{this._callbacks.remove(e,t);n.dispose=Emitter._noop;if(this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()){this._options.onLastListenerRemove(this)}}};if(Array.isArray(i)){i.push(n)}return n})}return this._event}fire(e){if(this._callbacks){this._callbacks.invoke.call(this._callbacks,e)}}dispose(){if(this._callbacks){this._callbacks.dispose();this._callbacks=undefined}}}Emitter._noop=function(){};t.Emitter=Emitter},774:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(924);var r;(function(e){e.type=new n.RequestType0("workspace/workspaceFolders")})(r=t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={}));var u;(function(e){e.type=new n.NotificationType("workspace/didChangeWorkspaceFolders")})(u=t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},790:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(532);const r=i(573);const u=i(146);const o=i(302);const f=i(678);const l=i(645);function createConverter(e){const t=e=>e.toString();const i=e||t;function asUri(e){return i(e)}function asTextDocumentIdentifier(e){return{uri:i(e.uri)}}function asVersionedTextDocumentIdentifier(e){return{uri:i(e.uri),version:e.version}}function asOpenTextDocumentParams(e){return{textDocument:{uri:i(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}}function isTextDocumentChangeEvent(e){let t=e;return!!t.document&&!!t.contentChanges}function isTextDocument(e){let t=e;return!!t.uri&&!!t.version}function asChangeTextDocumentParams(e){if(isTextDocument(e)){let t={textDocument:{uri:i(e.uri),version:e.version},contentChanges:[{text:e.getText()}]};return t}else if(isTextDocumentChangeEvent(e)){let t=e.document;let n={textDocument:{uri:i(t.uri),version:t.version},contentChanges:e.contentChanges.map(e=>{let t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}})};return n}else{throw Error("Unsupported text document change parameter")}}function asCloseTextDocumentParams(e){return{textDocument:asTextDocumentIdentifier(e)}}function asSaveTextDocumentParams(e,t=false){let i={textDocument:asVersionedTextDocumentIdentifier(e)};if(t){i.text=e.getText()}return i}function asTextDocumentSaveReason(e){switch(e){case n.TextDocumentSaveReason.Manual:return r.TextDocumentSaveReason.Manual;case n.TextDocumentSaveReason.AfterDelay:return r.TextDocumentSaveReason.AfterDelay;case n.TextDocumentSaveReason.FocusOut:return r.TextDocumentSaveReason.FocusOut}return r.TextDocumentSaveReason.Manual}function asWillSaveTextDocumentParams(e){return{textDocument:asTextDocumentIdentifier(e.document),reason:asTextDocumentSaveReason(e.reason)}}function asTextDocumentPositionParams(e,t){return{textDocument:asTextDocumentIdentifier(e),position:asWorkerPosition(t)}}function asTriggerKind(e){switch(e){case n.CompletionTriggerKind.TriggerCharacter:return r.CompletionTriggerKind.TriggerCharacter;case n.CompletionTriggerKind.TriggerForIncompleteCompletions:return r.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return r.CompletionTriggerKind.Invoked}}function asCompletionParams(e,t,i){return{textDocument:asTextDocumentIdentifier(e),position:asWorkerPosition(t),context:{triggerKind:asTriggerKind(i.triggerKind),triggerCharacter:i.triggerCharacter}}}function asWorkerPosition(e){return{line:e.line,character:e.character}}function asPosition(e){if(e===void 0){return undefined}else if(e===null){return null}return{line:e.line,character:e.character}}function asRange(e){if(e===void 0||e===null){return e}return{start:asPosition(e.start),end:asPosition(e.end)}}function asDiagnosticSeverity(e){switch(e){case n.DiagnosticSeverity.Error:return r.DiagnosticSeverity.Error;case n.DiagnosticSeverity.Warning:return r.DiagnosticSeverity.Warning;case n.DiagnosticSeverity.Information:return r.DiagnosticSeverity.Information;case n.DiagnosticSeverity.Hint:return r.DiagnosticSeverity.Hint}}function asDiagnostic(e){let t=r.Diagnostic.create(asRange(e.range),e.message);if(u.number(e.severity)){t.severity=asDiagnosticSeverity(e.severity)}if(u.number(e.code)||u.string(e.code)){t.code=e.code}if(e.source){t.source=e.source}return t}function asDiagnostics(e){if(e===void 0||e===null){return e}return e.map(asDiagnostic)}function asDocumentation(e,t){switch(e){case"$string":return t;case r.MarkupKind.PlainText:return{kind:e,value:t};case r.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}function asCompletionItemKind(e,t){if(t!==void 0){return t}return e+1}function asCompletionItem(e){let t={label:e.label};let i=e instanceof o.default?e:undefined;if(e.detail){t.detail=e.detail}if(e.documentation){if(!i||i.documentationFormat==="$string"){t.documentation=e.documentation}else{t.documentation=asDocumentation(i.documentationFormat,e.documentation)}}if(e.filterText){t.filterText=e.filterText}fillPrimaryInsertText(t,e);if(u.number(e.kind)){t.kind=asCompletionItemKind(e.kind,i&&i.originalItemKind)}if(e.sortText){t.sortText=e.sortText}if(e.additionalTextEdits){t.additionalTextEdits=asTextEdits(e.additionalTextEdits)}if(e.commitCharacters){t.commitCharacters=e.commitCharacters.slice()}if(e.command){t.command=asCommand(e.command)}if(e.preselect===true||e.preselect===false){t.preselect=e.preselect}if(i){if(i.data!==void 0){t.data=i.data}if(i.deprecated===true||i.deprecated===false){t.deprecated=i.deprecated}}return t}function fillPrimaryInsertText(e,t){let i=r.InsertTextFormat.PlainText;let u;let o=undefined;if(t.textEdit){u=t.textEdit.newText;o=asRange(t.textEdit.range)}else if(t.insertText instanceof n.SnippetString){i=r.InsertTextFormat.Snippet;u=t.insertText.value}else{u=t.insertText}if(t.range){o=asRange(t.range)}e.insertTextFormat=i;if(t.fromEdit&&u&&o){e.textEdit={newText:u,range:o}}else{e.insertText=u}}function asTextEdit(e){return{range:asRange(e.range),newText:e.newText}}function asTextEdits(e){if(e===void 0||e===null){return e}return e.map(asTextEdit)}function asReferenceParams(e,t,i){return{textDocument:asTextDocumentIdentifier(e),position:asWorkerPosition(t),context:{includeDeclaration:i.includeDeclaration}}}function asCodeActionContext(e){if(e===void 0||e===null){return e}return r.CodeActionContext.create(asDiagnostics(e.diagnostics),u.string(e.only)?[e.only]:undefined)}function asCommand(e){let t=r.Command.create(e.title,e.command);if(e.arguments){t.arguments=e.arguments}return t}function asCodeLens(e){let t=r.CodeLens.create(asRange(e.range));if(e.command){t.command=asCommand(e.command)}if(e instanceof f.default){if(e.data){t.data=e.data}}return t}function asFormattingOptions(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces}}function asDocumentSymbolParams(e){return{textDocument:asTextDocumentIdentifier(e)}}function asCodeLensParams(e){return{textDocument:asTextDocumentIdentifier(e)}}function asDocumentLink(e){let t=r.DocumentLink.create(asRange(e.range));if(e.target){t.target=asUri(e.target)}let i=e instanceof l.default?e:undefined;if(i&&i.data){t.data=i.data}return t}function asDocumentLinkParams(e){return{textDocument:asTextDocumentIdentifier(e)}}return{asUri:asUri,asTextDocumentIdentifier:asTextDocumentIdentifier,asVersionedTextDocumentIdentifier:asVersionedTextDocumentIdentifier,asOpenTextDocumentParams:asOpenTextDocumentParams,asChangeTextDocumentParams:asChangeTextDocumentParams,asCloseTextDocumentParams:asCloseTextDocumentParams,asSaveTextDocumentParams:asSaveTextDocumentParams,asWillSaveTextDocumentParams:asWillSaveTextDocumentParams,asTextDocumentPositionParams:asTextDocumentPositionParams,asCompletionParams:asCompletionParams,asWorkerPosition:asWorkerPosition,asRange:asRange,asPosition:asPosition,asDiagnosticSeverity:asDiagnosticSeverity,asDiagnostic:asDiagnostic,asDiagnostics:asDiagnostics,asCompletionItem:asCompletionItem,asTextEdit:asTextEdit,asReferenceParams:asReferenceParams,asCodeActionContext:asCodeActionContext,asCommand:asCommand,asCodeLens:asCodeLens,asFormattingOptions:asFormattingOptions,asDocumentSymbolParams:asDocumentSymbolParams,asCodeLensParams:asCodeLensParams,asDocumentLink:asDocumentLink,asDocumentLinkParams:asDocumentLinkParams}}t.createConverter=createConverter},797:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function boolean(e){return e===true||e===false}t.boolean=boolean;function string(e){return typeof e==="string"||e instanceof String}t.string=string;function number(e){return typeof e==="number"||e instanceof Number}t.number=number;function error(e){return e instanceof Error}t.error=error;function func(e){return typeof e==="function"}t.func=func;function array(e){return Array.isArray(e)}t.array=array;function stringArray(e){return array(e)&&e.every(e=>string(e))}t.stringArray=stringArray;function typedArray(e,t){return Array.isArray(e)&&e.every(t)}t.typedArray=typedArray;function thenable(e){return e&&func(e.then)}t.thenable=thenable},807:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(193);const r=i(932);const u=i(308);function createClientSocketTransport(e,t="utf-8"){let i;let o=new Promise((e,t)=>{i=e});return new Promise((f,l)=>{let s=n.createServer(e=>{s.close();i([new r.SocketMessageReader(e,t),new u.SocketMessageWriter(e,t)])});s.on("error",l);s.listen(e,"127.0.0.1",()=>{s.removeListener("error",l);f({onConnected:()=>{return o}})})})}t.createClientSocketTransport=createClientSocketTransport;function createServerSocketTransport(e,t="utf-8"){const i=n.createConnection(e,"127.0.0.1");return[new r.SocketMessageReader(i,t),new u.SocketMessageWriter(i,t)]}t.createServerSocketTransport=createServerSocketTransport},863:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(978);const r=i(146);const u=i(532);const o=i(573);const f=i(592);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}class DeclarationFeature extends f.TextDocumentFeature{constructor(e){super(e,o.DeclarationRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"declaration");t.dynamicRegistration=true;t.linkSupport=true}initialize(e,t){if(!e.declarationProvider){return}if(e.declarationProvider===true){if(!t){return}this.register(this.messages,{id:n.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const i=e.declarationProvider;const u=r.string(i.id)&&i.id.length>0?i.id:n.generateUuid();const o=i.documentSelector||t;if(o){this.register(this.messages,{id:u,registerOptions:Object.assign({},{documentSelector:o})})}}}registerLanguageProvider(e){let t=this._client;let i=(e,i,n)=>{return t.sendRequest(o.DeclarationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asDeclarationResult,e=>{t.logFailedRequest(o.DeclarationRequest.type,e);return Promise.resolve(null)})};let n=t.clientOptions.middleware;return u.languages.registerDeclarationProvider(e.documentSelector,{provideDeclaration:(e,t,r)=>{return n.provideDeclaration?n.provideDeclaration(e,t,r,i):i(e,t,r)}})}}t.DeclarationFeature=DeclarationFeature},894:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(924);let r;var u;(function(e){e.type=new n.RequestType("textDocument/declaration")})(u=t.DeclarationRequest||(t.DeclarationRequest={}))},907:function(e,t,i){"use strict";function __export(e){for(var i in e)if(!t.hasOwnProperty(i))t[i]=e[i]}Object.defineProperty(t,"__esModule",{value:true});const n=i(204);const r=i(66);const u=i(579);const o=i(592);const f=i(532);const l=i(573);const s=i(276);const c=i(713);const h=i(136);const a=i(430);const d=i(49);const m=i(483);const y=i(863);const C=i(146);const R=i(389);__export(i(592));const D="^1.30";var w;(function(e){function is(e){return C.string(e.command)}e.is=is})(w||(w={}));var S;(function(e){e[e["stdio"]=0]="stdio";e[e["ipc"]=1]="ipc";e[e["pipe"]=2]="pipe";e[e["socket"]=3]="socket"})(S=t.TransportKind||(t.TransportKind={}));var b;(function(e){function isSocket(e){let t=e;return t&&t.kind===S.socket&&C.number(t.port)}e.isSocket=isSocket})(b||(b={}));var p;(function(e){function is(e){return C.string(e.module)}e.is=is})(p||(p={}));var x;(function(e){function is(e){let t=e;return t&&t.writer!==void 0&&t.reader!==void 0}e.is=is})(x||(x={}));var T;(function(e){function is(e){let t=e;return t&&t.process!==void 0&&typeof t.detached==="boolean"}e.is=is})(T||(T={}));class LanguageClient extends o.BaseLanguageClient{constructor(e,t,i,n,r){let u;let o;let f;let l;let s;if(C.string(t)){u=e;o=t;f=i;l=n;s=!!r}else{u=e.toLowerCase();o=e;f=t;l=i;s=n}if(s===void 0){s=false}super(u,o,l);this._serverOptions=f;this._forceDebug=s;try{this.checkVersion()}catch(e){if(C.string(e.message)){this.outputChannel.appendLine(e.message)}throw e}}checkVersion(){let e=u.parse(f.version);if(!e){throw new Error(`No valid VS Code version detected. Version string is: ${f.version}`)}if(e.prerelease&&e.prerelease.length>0){e.prerelease=[]}if(!u.satisfies(e,D)){throw new Error(`The language client requires VS Code version ${D} but received version ${f.version}`)}}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=undefined;if(this._isDetached===void 0||!this._isDetached){this.checkProcessDied(e)}this._isDetached=undefined}})}checkProcessDied(e){if(!e){return}setTimeout(()=>{try{process.kill(e.pid,0);R.terminate(e)}catch(e){}},2e3)}handleConnectionClosed(){this._serverProcess=undefined;super.handleConnectionClosed()}createMessageTransports(e){function getEnvironment(e){if(!e){return process.env}let t=Object.create(null);Object.keys(process.env).forEach(e=>t[e]=process.env[e]);Object.keys(e).forEach(i=>t[i]=e[i]);return t}function startedInDebugMode(){let e=process.execArgv;if(e){return e.some(e=>/^--debug=?/.test(e)||/^--debug-brk=?/.test(e)||/^--inspect=?/.test(e)||/^--inspect-brk=?/.test(e))}return false}let t=this._serverOptions;if(C.func(t)){return t().then(t=>{if(o.MessageTransports.is(t)){this._isDetached=!!t.detached;return t}else if(x.is(t)){this._isDetached=!!t.detached;return{reader:new l.StreamMessageReader(t.reader),writer:new l.StreamMessageWriter(t.writer)}}else{let i;if(T.is(t)){i=t.process;this._isDetached=t.detached}else{i=t;this._isDetached=false}i.stderr.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));return{reader:new l.StreamMessageReader(i.stdout),writer:new l.StreamMessageWriter(i.stdin)}}})}let i;let r=t;if(r.run||r.debug){if(typeof v8debug==="object"||this._forceDebug||startedInDebugMode()){i=r.debug}else{i=r.run}}else{i=t}return this._getServerWorkingDir(i.options).then(r=>{if(p.is(i)&&i.module){let t=i;let u=t.transport||S.stdio;if(t.runtime){let i=[];let o=t.options||Object.create(null);if(o.execArgv){o.execArgv.forEach(e=>i.push(e))}i.push(t.module);if(t.args){t.args.forEach(e=>i.push(e))}let f=Object.create(null);f.cwd=r;f.env=getEnvironment(o.env);let s=undefined;if(u===S.ipc){f.stdio=[null,null,null,"ipc"];i.push("--node-ipc")}else if(u===S.stdio){i.push("--stdio")}else if(u===S.pipe){s=l.generateRandomPipeName();i.push(`--pipe=${s}`)}else if(b.isSocket(u)){i.push(`--socket=${u.port}`)}i.push(`--clientProcessId=${process.pid.toString()}`);if(u===S.ipc||u===S.stdio){let r=n.spawn(t.runtime,i,f);if(!r||!r.pid){return Promise.reject(`Launching server using runtime ${t.runtime} failed.`)}this._serverProcess=r;r.stderr.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));if(u===S.ipc){r.stdout.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));return Promise.resolve({reader:new l.IPCMessageReader(r),writer:new l.IPCMessageWriter(r)})}else{return Promise.resolve({reader:new l.StreamMessageReader(r.stdout),writer:new l.StreamMessageWriter(r.stdin)})}}else if(u==S.pipe){return l.createClientPipeTransport(s).then(r=>{let u=n.spawn(t.runtime,i,f);if(!u||!u.pid){return Promise.reject(`Launching server using runtime ${t.runtime} failed.`)}this._serverProcess=u;u.stderr.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));u.stdout.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));return r.onConnected().then(e=>{return{reader:e[0],writer:e[1]}})})}else if(b.isSocket(u)){return l.createClientSocketTransport(u.port).then(r=>{let u=n.spawn(t.runtime,i,f);if(!u||!u.pid){return Promise.reject(`Launching server using runtime ${t.runtime} failed.`)}this._serverProcess=u;u.stderr.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));u.stdout.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));return r.onConnected().then(e=>{return{reader:e[0],writer:e[1]}})})}}else{let i=undefined;return new Promise((o,f)=>{let s=t.args&&t.args.slice()||[];if(u===S.ipc){s.push("--node-ipc")}else if(u===S.stdio){s.push("--stdio")}else if(u===S.pipe){i=l.generateRandomPipeName();s.push(`--pipe=${i}`)}else if(b.isSocket(u)){s.push(`--socket=${u.port}`)}s.push(`--clientProcessId=${process.pid.toString()}`);let c=t.options||Object.create(null);c.execArgv=c.execArgv||[];c.cwd=r;c.silent=true;if(u===S.ipc||u===S.stdio){let i=n.fork(t.module,s||[],c);this._serverProcess=i;i.stderr.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));if(u===S.ipc){i.stdout.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));o({reader:new l.IPCMessageReader(this._serverProcess),writer:new l.IPCMessageWriter(this._serverProcess)})}else{o({reader:new l.StreamMessageReader(i.stdout),writer:new l.StreamMessageWriter(i.stdin)})}}else if(u===S.pipe){l.createClientPipeTransport(i).then(i=>{let r=n.fork(t.module,s||[],c);this._serverProcess=r;r.stderr.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));r.stdout.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));i.onConnected().then(e=>{o({reader:e[0],writer:e[1]})})})}else if(b.isSocket(u)){l.createClientSocketTransport(u.port).then(i=>{let r=n.fork(t.module,s||[],c);this._serverProcess=r;r.stderr.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));r.stdout.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));i.onConnected().then(e=>{o({reader:e[0],writer:e[1]})})})}})}}else if(w.is(i)&&i.command){let t=i;let u=t.args||[];let o=Object.assign({},t.options);o.cwd=o.cwd||r;let f=n.spawn(t.command,u,o);if(!f||!f.pid){return Promise.reject(`Launching server using command ${t.command} failed.`)}f.stderr.on("data",t=>this.outputChannel.append(C.string(t)?t:t.toString(e)));this._serverProcess=f;this._isDetached=!!o.detached;return Promise.resolve({reader:new l.StreamMessageReader(f.stdout),writer:new l.StreamMessageWriter(f.stdin)})}return Promise.reject(new Error(`Unsupported server configuration `+JSON.stringify(t,null,4)))})}registerProposedFeatures(){this.registerFeatures(F.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures();this.registerFeature(new c.ConfigurationFeature(this));this.registerFeature(new a.TypeDefinitionFeature(this));this.registerFeature(new h.ImplementationFeature(this));this.registerFeature(new s.ColorProviderFeature(this));this.registerFeature(new d.WorkspaceFoldersFeature(this));this.registerFeature(new m.FoldingRangeFeature(this));this.registerFeature(new y.DeclarationFeature(this))}_mainGetRootPath(){let e=f.workspace.workspaceFolders;if(!e||e.length===0){return undefined}let t=e[0];if(t.uri.scheme==="file"){return t.uri.fsPath}return undefined}_getServerWorkingDir(e){let t=e&&e.cwd;if(!t){t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()}if(t){return new Promise(e=>{r.lstat(t,(i,n)=>{e(!i&&n.isDirectory()?t:undefined)})})}return Promise.resolve(undefined)}}t.LanguageClient=LanguageClient;class SettingMonitor{constructor(e,t){this._client=e;this._setting=t;this._listeners=[]}start(){f.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners);this.onDidChangeConfiguration();return new f.Disposable(()=>{if(this._client.needsStop()){this._client.stop()}})}onDidChangeConfiguration(){let e=this._setting.indexOf(".");let t=e>=0?this._setting.substr(0,e):this._setting;let i=e>=0?this._setting.substr(e+1):undefined;let n=i?f.workspace.getConfiguration(t).get(i,false):f.workspace.getConfiguration(t);if(n&&this._client.needsStart()){this._client.start()}else if(!n&&this._client.needsStop()){this._client.stop()}}}t.SettingMonitor=SettingMonitor;var F;(function(e){function createAll(e){let t=[];return t}e.createAll=createAll})(F=t.ProposedFeatures||(t.ProposedFeatures={}))},924:function(e,t,i){"use strict";function __export(e){for(var i in e)if(!t.hasOwnProperty(i))t[i]=e[i]}Object.defineProperty(t,"__esModule",{value:true});const n=i(114);const r=i(273);t.RequestType=r.RequestType;t.RequestType0=r.RequestType0;t.RequestType1=r.RequestType1;t.RequestType2=r.RequestType2;t.RequestType3=r.RequestType3;t.RequestType4=r.RequestType4;t.RequestType5=r.RequestType5;t.RequestType6=r.RequestType6;t.RequestType7=r.RequestType7;t.RequestType8=r.RequestType8;t.RequestType9=r.RequestType9;t.ResponseError=r.ResponseError;t.ErrorCodes=r.ErrorCodes;t.NotificationType=r.NotificationType;t.NotificationType0=r.NotificationType0;t.NotificationType1=r.NotificationType1;t.NotificationType2=r.NotificationType2;t.NotificationType3=r.NotificationType3;t.NotificationType4=r.NotificationType4;t.NotificationType5=r.NotificationType5;t.NotificationType6=r.NotificationType6;t.NotificationType7=r.NotificationType7;t.NotificationType8=r.NotificationType8;t.NotificationType9=r.NotificationType9;const u=i(932);t.MessageReader=u.MessageReader;t.StreamMessageReader=u.StreamMessageReader;t.IPCMessageReader=u.IPCMessageReader;t.SocketMessageReader=u.SocketMessageReader;const o=i(308);t.MessageWriter=o.MessageWriter;t.StreamMessageWriter=o.StreamMessageWriter;t.IPCMessageWriter=o.IPCMessageWriter;t.SocketMessageWriter=o.SocketMessageWriter;const f=i(760);t.Disposable=f.Disposable;t.Event=f.Event;t.Emitter=f.Emitter;const l=i(258);t.CancellationTokenSource=l.CancellationTokenSource;t.CancellationToken=l.CancellationToken;const s=i(121);__export(i(521));__export(i(807));var c;(function(e){e.type=new r.NotificationType("$/cancelRequest")})(c||(c={}));t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var h;(function(e){e[e["Off"]=0]="Off";e[e["Messages"]=1]="Messages";e[e["Verbose"]=2]="Verbose"})(h=t.Trace||(t.Trace={}));(function(e){function fromString(t){t=t.toLowerCase();switch(t){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=fromString;function toString(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}e.toString=toString})(h=t.Trace||(t.Trace={}));var a;(function(e){e["Text"]="text";e["JSON"]="json"})(a=t.TraceFormat||(t.TraceFormat={}));(function(e){function fromString(t){t=t.toLowerCase();if(t==="json"){return e.JSON}else{return e.Text}}e.fromString=fromString})(a=t.TraceFormat||(t.TraceFormat={}));var d;(function(e){e.type=new r.NotificationType("$/setTraceNotification")})(d=t.SetTraceNotification||(t.SetTraceNotification={}));var m;(function(e){e.type=new r.NotificationType("$/logTraceNotification")})(m=t.LogTraceNotification||(t.LogTraceNotification={}));var y;(function(e){e[e["Closed"]=1]="Closed";e[e["Disposed"]=2]="Disposed";e[e["AlreadyListening"]=3]="AlreadyListening"})(y=t.ConnectionErrors||(t.ConnectionErrors={}));class ConnectionError extends Error{constructor(e,t){super(t);this.code=e;Object.setPrototypeOf(this,ConnectionError.prototype)}}t.ConnectionError=ConnectionError;var C;(function(e){function is(e){let t=e;return t&&n.func(t.cancelUndispatched)}e.is=is})(C=t.ConnectionStrategy||(t.ConnectionStrategy={}));var R;(function(e){e[e["New"]=1]="New";e[e["Listening"]=2]="Listening";e[e["Closed"]=3]="Closed";e[e["Disposed"]=4]="Disposed"})(R||(R={}));function _createMessageConnection(e,t,i,u){let o=0;let C=0;let D=0;const w="2.0";let S=undefined;let b=Object.create(null);let p=undefined;let x=Object.create(null);let T;let F=new s.LinkedMap;let E=Object.create(null);let k=Object.create(null);let g=h.Off;let L=a.Text;let O;let A=R.New;let U=new f.Emitter;let j=new f.Emitter;let N=new f.Emitter;let W=new f.Emitter;function createRequestQueueKey(e){return"req-"+e.toString()}function createResponseQueueKey(e){if(e===null){return"res-unknown-"+(++D).toString()}else{return"res-"+e.toString()}}function createNotificationQueueKey(){return"not-"+(++C).toString()}function addMessageToQueue(e,t){if(r.isRequestMessage(t)){e.set(createRequestQueueKey(t.id),t)}else if(r.isResponseMessage(t)){e.set(createResponseQueueKey(t.id),t)}else{e.set(createNotificationQueueKey(),t)}}function cancelUndispatched(e){return undefined}function isListening(){return A===R.Listening}function isClosed(){return A===R.Closed}function isDisposed(){return A===R.Disposed}function closeHandler(){if(A===R.New||A===R.Listening){A=R.Closed;j.fire(undefined)}}function readErrorHandler(e){U.fire([e,undefined,undefined])}function writeErrorHandler(e){U.fire(e)}e.onClose(closeHandler);e.onError(readErrorHandler);t.onClose(closeHandler);t.onError(writeErrorHandler);function triggerMessageQueue(){if(T||F.size===0){return}T=setImmediate(()=>{T=undefined;processMessageQueue()})}function processMessageQueue(){if(F.size===0){return}let e=F.shift();try{if(r.isRequestMessage(e)){handleRequest(e)}else if(r.isNotificationMessage(e)){handleNotification(e)}else if(r.isResponseMessage(e)){handleResponse(e)}else{handleInvalidMessage(e)}}finally{triggerMessageQueue()}}let I=e=>{try{if(r.isNotificationMessage(e)&&e.method===c.type.method){let i=createRequestQueueKey(e.params.id);let n=F.get(i);if(r.isRequestMessage(n)){let r=u&&u.cancelUndispatched?u.cancelUndispatched(n,cancelUndispatched):cancelUndispatched(n);if(r&&(r.error!==void 0||r.result!==void 0)){F.delete(i);r.id=n.id;traceSendingResponse(r,e.method,Date.now());t.write(r);return}}}addMessageToQueue(F,e)}finally{triggerMessageQueue()}};function handleRequest(e){if(isDisposed()){return}function reply(i,n,u){let o={jsonrpc:w,id:e.id};if(i instanceof r.ResponseError){o.error=i.toJson()}else{o.result=i===void 0?null:i}traceSendingResponse(o,n,u);t.write(o)}function replyError(i,n,r){let u={jsonrpc:w,id:e.id,error:i.toJson()};traceSendingResponse(u,n,r);t.write(u)}function replySuccess(i,n,r){if(i===void 0){i=null}let u={jsonrpc:w,id:e.id,result:i};traceSendingResponse(u,n,r);t.write(u)}traceReceivedRequest(e);let i=b[e.method];let u;let o;if(i){u=i.type;o=i.handler}let f=Date.now();if(o||S){let t=new l.CancellationTokenSource;let i=String(e.id);k[i]=t;try{let l;if(e.params===void 0||u!==void 0&&u.numberOfParams===0){l=o?o(t.token):S(e.method,t.token)}else if(n.array(e.params)&&(u===void 0||u.numberOfParams>1)){l=o?o(...e.params,t.token):S(e.method,...e.params,t.token)}else{l=o?o(e.params,t.token):S(e.method,e.params,t.token)}let s=l;if(!l){delete k[i];replySuccess(l,e.method,f)}else if(s.then){s.then(t=>{delete k[i];reply(t,e.method,f)},t=>{delete k[i];if(t instanceof r.ResponseError){replyError(t,e.method,f)}else if(t&&n.string(t.message)){replyError(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,f)}else{replyError(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,f)}})}else{delete k[i];reply(l,e.method,f)}}catch(t){delete k[i];if(t instanceof r.ResponseError){reply(t,e.method,f)}else if(t&&n.string(t.message)){replyError(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,f)}else{replyError(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,f)}}}else{replyError(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,f)}}function handleResponse(e){if(isDisposed()){return}if(e.id===null){if(e.error){i.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,undefined,4)}`)}else{i.error(`Received response message without id. No further error information provided.`)}}else{let t=String(e.id);let n=E[t];traceReceivedResponse(e,n);if(n){delete E[t];try{if(e.error){let t=e.error;n.reject(new r.ResponseError(t.code,t.message,t.data))}else if(e.result!==void 0){n.resolve(e.result)}else{throw new Error("Should never happen.")}}catch(e){if(e.message){i.error(`Response handler '${n.method}' failed with message: ${e.message}`)}else{i.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}}function handleNotification(e){if(isDisposed()){return}let t=undefined;let r;if(e.method===c.type.method){r=(e=>{let t=e.id;let i=k[String(t)];if(i){i.cancel()}})}else{let i=x[e.method];if(i){r=i.handler;t=i.type}}if(r||p){try{traceReceivedNotification(e);if(e.params===void 0||t!==void 0&&t.numberOfParams===0){r?r():p(e.method)}else if(n.array(e.params)&&(t===void 0||t.numberOfParams>1)){r?r(...e.params):p(e.method,...e.params)}else{r?r(e.params):p(e.method,e.params)}}catch(t){if(t.message){i.error(`Notification handler '${e.method}' failed with message: ${t.message}`)}else{i.error(`Notification handler '${e.method}' failed unexpectedly.`)}}}else{N.fire(e)}}function handleInvalidMessage(e){if(!e){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(n.string(t.id)||n.number(t.id)){let e=String(t.id);let i=E[e];if(i){i.reject(new Error("The received response has neither a result nor an error property."))}}}function traceSendingRequest(e){if(g===h.Off||!O){return}if(L===a.Text){let t=undefined;if(g===h.Verbose&&e.params){t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`}O.log(`Sending request '${e.method} - (${e.id})'.`,t)}else{logLSPMessage("send-request",e)}}function traceSendingNotification(e){if(g===h.Off||!O){return}if(L===a.Text){let t=undefined;if(g===h.Verbose){if(e.params){t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`}else{t="No parameters provided.\n\n"}}O.log(`Sending notification '${e.method}'.`,t)}else{logLSPMessage("send-notification",e)}}function traceSendingResponse(e,t,i){if(g===h.Off||!O){return}if(L===a.Text){let n=undefined;if(g===h.Verbose){if(e.error&&e.error.data){n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`}else{if(e.result){n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`}else if(e.error===void 0){n="No result returned.\n\n"}}}O.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-i}ms`,n)}else{logLSPMessage("send-response",e)}}function traceReceivedRequest(e){if(g===h.Off||!O){return}if(L===a.Text){let t=undefined;if(g===h.Verbose&&e.params){t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`}O.log(`Received request '${e.method} - (${e.id})'.`,t)}else{logLSPMessage("receive-request",e)}}function traceReceivedNotification(e){if(g===h.Off||!O||e.method===m.type.method){return}if(L===a.Text){let t=undefined;if(g===h.Verbose){if(e.params){t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`}else{t="No parameters provided.\n\n"}}O.log(`Received notification '${e.method}'.`,t)}else{logLSPMessage("receive-notification",e)}}function traceReceivedResponse(e,t){if(g===h.Off||!O){return}if(L===a.Text){let i=undefined;if(g===h.Verbose){if(e.error&&e.error.data){i=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`}else{if(e.result){i=`Result: ${JSON.stringify(e.result,null,4)}\n\n`}else if(e.error===void 0){i="No result returned.\n\n"}}}if(t){let n=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";O.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${n}`,i)}else{O.log(`Received response ${e.id} without active response promise.`,i)}}else{logLSPMessage("receive-response",e)}}function logLSPMessage(e,t){if(!O||g===h.Off){return}const i={isLSPMessage:true,type:e,message:t,timestamp:Date.now()};O.log(i)}function throwIfClosedOrDisposed(){if(isClosed()){throw new ConnectionError(y.Closed,"Connection is closed.")}if(isDisposed()){throw new ConnectionError(y.Disposed,"Connection is disposed.")}}function throwIfListening(){if(isListening()){throw new ConnectionError(y.AlreadyListening,"Connection is already listening")}}function throwIfNotListening(){if(!isListening()){throw new Error("Call listen() first.")}}function undefinedToNull(e){if(e===void 0){return null}else{return e}}function computeMessageParams(e,t){let i;let n=e.numberOfParams;switch(n){case 0:i=null;break;case 1:i=undefinedToNull(t[0]);break;default:i=[];for(let e=0;e<t.length&&e<n;e++){i.push(undefinedToNull(t[e]))}if(t.length<n){for(let e=t.length;e<n;e++){i.push(null)}}break}return i}let q={sendNotification:(e,...i)=>{throwIfClosedOrDisposed();let r;let u;if(n.string(e)){r=e;switch(i.length){case 0:u=null;break;case 1:u=i[0];break;default:u=i;break}}else{r=e.method;u=computeMessageParams(e,i)}let o={jsonrpc:w,method:r,params:u};traceSendingNotification(o);t.write(o)},onNotification:(e,t)=>{throwIfClosedOrDisposed();if(n.func(e)){p=e}else if(t){if(n.string(e)){x[e]={type:undefined,handler:t}}else{x[e.method]={type:e,handler:t}}}},sendRequest:(e,...i)=>{throwIfClosedOrDisposed();throwIfNotListening();let u;let f;let s=undefined;if(n.string(e)){u=e;switch(i.length){case 0:f=null;break;case 1:if(l.CancellationToken.is(i[0])){f=null;s=i[0]}else{f=undefinedToNull(i[0])}break;default:const e=i.length-1;if(l.CancellationToken.is(i[e])){s=i[e];if(i.length===2){f=undefinedToNull(i[0])}else{f=i.slice(0,e).map(e=>undefinedToNull(e))}}else{f=i.map(e=>undefinedToNull(e))}break}}else{u=e.method;f=computeMessageParams(e,i);let t=e.numberOfParams;s=l.CancellationToken.is(i[t])?i[t]:undefined}let h=o++;let a=new Promise((e,i)=>{let n={jsonrpc:w,id:h,method:u,params:f};let o={method:u,timerStart:Date.now(),resolve:e,reject:i};traceSendingRequest(n);try{t.write(n)}catch(e){o.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason"));o=null}if(o){E[String(h)]=o}});if(s){s.onCancellationRequested(()=>{q.sendNotification(c.type,{id:h})})}return a},onRequest:(e,t)=>{throwIfClosedOrDisposed();if(n.func(e)){S=e}else if(t){if(n.string(e)){b[e]={type:undefined,handler:t}}else{b[e.method]={type:e,handler:t}}}},trace:(e,t,i)=>{let r=false;let u=a.Text;if(i!==void 0){if(n.boolean(i)){r=i}else{r=i.sendNotification||false;u=i.traceFormat||a.Text}}g=e;L=u;if(g===h.Off){O=undefined}else{O=t}if(r&&!isClosed()&&!isDisposed()){q.sendNotification(d.type,{value:h.toString(e)})}},onError:U.event,onClose:j.event,onUnhandledNotification:N.event,onDispose:W.event,dispose:()=>{if(isDisposed()){return}A=R.Disposed;W.fire(undefined);let i=new Error("Connection got disposed.");Object.keys(E).forEach(e=>{E[e].reject(i)});E=Object.create(null);k=Object.create(null);F=new s.LinkedMap;if(n.func(t.dispose)){t.dispose()}if(n.func(e.dispose)){e.dispose()}},listen:()=>{throwIfClosedOrDisposed();throwIfListening();A=R.Listening;e.listen(I)},inspect:()=>{console.log("inspect")}};q.onNotification(m.type,e=>{if(g===h.Off||!O){return}O.log(e.message,g===h.Verbose?e.verbose:undefined)});return q}function isMessageReader(e){return e.listen!==void 0&&e.read===void 0}function isMessageWriter(e){return e.write!==void 0&&e.end===void 0}function createMessageConnection(e,i,n,r){if(!n){n=t.NullLogger}let f=isMessageReader(e)?e:new u.StreamMessageReader(e);let l=isMessageWriter(i)?i:new o.StreamMessageWriter(i);return _createMessageConnection(f,l,n,r)}t.createMessageConnection=createMessageConnection},932:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(760);const r=i(114);let u=8192;let o=Buffer.from("\r","ascii")[0];let f=Buffer.from("\n","ascii")[0];let l="\r\n";class MessageBuffer{constructor(e="utf8"){this.encoding=e;this.index=0;this.buffer=Buffer.allocUnsafe(u)}append(e){var t=e;if(typeof e==="string"){var i=e;var n=Buffer.byteLength(i,this.encoding);t=Buffer.allocUnsafe(n);t.write(i,0,n,this.encoding)}if(this.buffer.length-this.index>=t.length){t.copy(this.buffer,this.index,0,t.length)}else{var r=(Math.ceil((this.index+t.length)/u)+1)*u;if(this.index===0){this.buffer=Buffer.allocUnsafe(r);t.copy(this.buffer,0,0,t.length)}else{this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],r)}}this.index+=t.length}tryReadHeaders(){let e=undefined;let t=0;while(t+3<this.index&&(this.buffer[t]!==o||this.buffer[t+1]!==f||this.buffer[t+2]!==o||this.buffer[t+3]!==f)){t++}if(t+3>=this.index){return e}e=Object.create(null);let i=this.buffer.toString("ascii",0,t).split(l);i.forEach(t=>{let i=t.indexOf(":");if(i===-1){throw new Error("Message header must separate key and value using :")}let n=t.substr(0,i);let r=t.substr(i+1).trim();e[n]=r});let n=t+4;this.buffer=this.buffer.slice(n);this.index=this.index-n;return e}tryReadContent(e){if(this.index<e){return null}let t=this.buffer.toString(this.encoding,0,e);let i=e;this.buffer.copy(this.buffer,0,i);this.index=this.index-i;return t}get numberOfBytes(){return this.index}}var s;(function(e){function is(e){let t=e;return t&&r.func(t.listen)&&r.func(t.dispose)&&r.func(t.onError)&&r.func(t.onClose)&&r.func(t.onPartialMessage)}e.is=is})(s=t.MessageReader||(t.MessageReader={}));class AbstractMessageReader{constructor(){this.errorEmitter=new n.Emitter;this.closeEmitter=new n.Emitter;this.partialMessageEmitter=new n.Emitter}dispose(){this.errorEmitter.dispose();this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(undefined)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){if(e instanceof Error){return e}else{return new Error(`Reader recevied error. Reason: ${r.string(e.message)?e.message:"unknown"}`)}}}t.AbstractMessageReader=AbstractMessageReader;class StreamMessageReader extends AbstractMessageReader{constructor(e,t="utf8"){super();this.readable=e;this.buffer=new MessageBuffer(t);this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1;this.messageToken=0;this.partialMessageTimer=undefined;this.callback=e;this.readable.on("data",e=>{this.onData(e)});this.readable.on("error",e=>this.fireError(e));this.readable.on("close",()=>this.fireClose())}onData(e){this.buffer.append(e);while(true){if(this.nextMessageLength===-1){let e=this.buffer.tryReadHeaders();if(!e){return}let t=e["Content-Length"];if(!t){throw new Error("Header must provide a Content-Length property.")}let i=parseInt(t);if(isNaN(i)){throw new Error("Content-Length value must be a number.")}this.nextMessageLength=i}var t=this.buffer.tryReadContent(this.nextMessageLength);if(t===null){this.setPartialMessageTimer();return}this.clearPartialMessageTimer();this.nextMessageLength=-1;this.messageToken++;var i=JSON.parse(t);this.callback(i)}}clearPartialMessageTimer(){if(this.partialMessageTimer){clearTimeout(this.partialMessageTimer);this.partialMessageTimer=undefined}}setPartialMessageTimer(){this.clearPartialMessageTimer();if(this._partialMessageTimeout<=0){return}this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=undefined;if(e===this.messageToken){this.firePartialMessage({messageToken:e,waitingTime:t});this.setPartialMessageTimer()}},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout)}}t.StreamMessageReader=StreamMessageReader;class IPCMessageReader extends AbstractMessageReader{constructor(e){super();this.process=e;let t=this.process;t.on("error",e=>this.fireError(e));t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}}t.IPCMessageReader=IPCMessageReader;class SocketMessageReader extends StreamMessageReader{constructor(e,t="utf-8"){super(e,t)}}t.SocketMessageReader=SocketMessageReader},940:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(924);var r;(function(e){e.type=new n.RequestType("workspace/configuration")})(r=t.ConfigurationRequest||(t.ConfigurationRequest={}))},978:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class ValueUUID{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class V4UUID extends ValueUUID{constructor(){super([V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-","4",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._oneOf(V4UUID._timeHighBits),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return V4UUID._oneOf(V4UUID._chars)}}V4UUID._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];V4UUID._timeHighBits=["8","9","a","b"];t.empty=new ValueUUID("00000000-0000-0000-0000-000000000000");function v4(){return new V4UUID}t.v4=v4;const i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function isUUID(e){return i.test(e)}t.isUUID=isUUID;function parse(e){if(!isUUID(e)){throw new Error("invalid uuid")}return new ValueUUID(e)}t.parse=parse;function generateUuid(){return v4().asHex()}t.generateUuid=generateUuid}},function(e){"use strict";!function(){e.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}}();!function(){e.n=function(t){var i=t&&t.__esModule?function getDefault(){return t["default"]}:function getModuleExports(){return t};e.d(i,"a",i);return i}}();!function(){var t=Object.prototype.hasOwnProperty;e.d=function(e,i,n){if(!t.call(e,i)){Object.defineProperty(e,i,{enumerable:true,get:n})}}}()});